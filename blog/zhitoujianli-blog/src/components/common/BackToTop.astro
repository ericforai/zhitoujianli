---
import { Icon } from 'astro-icon/components';
---

<button
  id="back-to-top"
  class="fixed bottom-6 right-6 z-40 bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 opacity-0 invisible"
  aria-label="回到顶部"
  title="回到顶部"
>
  <Icon name="tabler:arrow-up" class="w-5 h-5" />
</button>

<script>
  // 回到顶部功能
  const backToTopButton = document.getElementById('back-to-top');

  if (backToTopButton) {
    // 监听滚动事件
    window.addEventListener('scroll', () => {
      if (window.scrollY > 300) {
        backToTopButton.classList.remove('opacity-0', 'invisible');
        backToTopButton.classList.add('opacity-100', 'visible');
      } else {
        backToTopButton.classList.add('opacity-0', 'invisible');
        backToTopButton.classList.remove('opacity-100', 'visible');
      }
    });

    // 点击回到顶部
    backToTopButton.addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });

    // 键盘支持
    backToTopButton.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      }
    });
  }
</script>
