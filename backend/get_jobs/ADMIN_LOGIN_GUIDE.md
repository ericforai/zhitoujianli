# ç®¡ç†å‘˜ç™»å½•æŒ‡å—

## ğŸ”‘ é»˜è®¤ç®¡ç†å‘˜è´¦å·

ç³»ç»Ÿé¢„è®¾äº†ç‹¬ç«‹çš„ç®¡ç†å‘˜è´¦æˆ·ä½“ç³»ï¼Œä¸æ™®é€šç”¨æˆ·è´¦æˆ·å®Œå…¨åˆ†ç¦»ã€‚

### é¢„è®¾ç®¡ç†å‘˜è´¦å·

- **ç”¨æˆ·å**: `admin`
- **å¯†ç **: `Zhitou!@#1031`
- **ç±»å‹**: è¶…çº§ç®¡ç†å‘˜ (SUPER_ADMIN)
- **æƒé™**: æ‹¥æœ‰æ‰€æœ‰æƒé™

---

## ğŸ“ ç™»å½•æ­¥éª¤

### æ–¹æ³•ä¸€ï¼šé€šè¿‡APIç™»å½•ï¼ˆæ¨èï¼‰

**æ­¥éª¤1ï¼šç®¡ç†å‘˜ç™»å½•**

```bash
curl -X POST https://zhitoujianli.com/api/admin/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "password": "Zhitou!@#1031"
  }'
```

**å“åº”ç¤ºä¾‹**ï¼š

```json
{
  "success": true,
  "message": "ç™»å½•æˆåŠŸ",
  "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9...",
  "admin": {
    "id": 1,
    "username": "admin",
    "adminType": "SUPER_ADMIN",
    "adminTypeName": "è¶…çº§ç®¡ç†å‘˜"
  }
}
```

**æ­¥éª¤2ï¼šä½¿ç”¨Tokenè®¿é—®åå°**

```bash
curl -X GET https://zhitoujianli.com/api/admin/dashboard \
  -H "Authorization: Bearer <TOKEN_FROM_STEP_1>"
```

---

### æ–¹æ³•äºŒï¼šæµè§ˆå™¨è®¿é—®ï¼ˆå¦‚æœæœ‰å‰ç«¯ç•Œé¢ï¼‰

1. æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ç®¡ç†å‘˜ç™»å½•é¡µé¢
2. è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
   - ç”¨æˆ·åï¼š`admin`
   - å¯†ç ï¼š`Zhitou!@#1031`
3. ç™»å½•æˆåŠŸåï¼Œè®¿é—® `/admin/dashboard`

---

## ğŸ” ç³»ç»Ÿç‰¹ç‚¹

### ç‹¬ç«‹çš„ç®¡ç†å‘˜ä½“ç³»

- âœ… **ç®¡ç†å‘˜è´¦æˆ·ç‹¬ç«‹äºç”¨æˆ·è´¦æˆ·**
  - ç®¡ç†å‘˜æœ‰è‡ªå·±ç‹¬ç«‹çš„è´¦å·å¯†ç 
  - ä¸ä¾èµ–æ™®é€šç”¨æˆ·çš„æ³¨å†Œ/ç™»å½•æµç¨‹
  - ç®¡ç†å‘˜æ˜¯ç½‘ç«™çš„æ‹¥æœ‰è€…ï¼Œç®¡ç†æ™®é€šç”¨æˆ·

- âœ… **ç³»ç»Ÿè‡ªåŠ¨åˆå§‹åŒ–**
  - ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨åˆ›å»ºé»˜è®¤ç®¡ç†å‘˜è´¦å·
  - å¦‚æœè´¦å·å·²å­˜åœ¨ï¼Œä¸ä¼šé‡å¤åˆ›å»º
  - é¦–æ¬¡å¯åŠ¨åå³å¯ä½¿ç”¨

- âœ… **å¯†ç å®‰å…¨**
  - å¯†ç ä½¿ç”¨BCryptåŠ å¯†å­˜å‚¨
  - æ˜æ–‡å¯†ç ï¼š`Zhitou!@#1031`
  - æ•°æ®åº“å­˜å‚¨ï¼šåŠ å¯†åçš„å“ˆå¸Œå€¼

---

## ğŸ›¡ï¸ å®‰å…¨è¯´æ˜

### å¯†ç ç®¡ç†

- **é¦–æ¬¡ä½¿ç”¨**ï¼šä½¿ç”¨é»˜è®¤å¯†ç ç™»å½•
- **å»ºè®®æ“ä½œ**ï¼šç™»å½•åç«‹å³ä¿®æ”¹å¯†ç ï¼ˆå¦‚æœæä¾›ä¿®æ”¹å¯†ç åŠŸèƒ½ï¼‰
- **å¯†ç è¦æ±‚**ï¼šå»ºè®®ä½¿ç”¨å¼ºå¯†ç ï¼ˆåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦ï¼‰

### Tokenæœ‰æ•ˆæœŸ

- **é»˜è®¤æœ‰æ•ˆæœŸ**ï¼š24å°æ—¶
- **Tokenæ ¼å¼**ï¼šJWT Token
- **Tokenå­˜å‚¨**ï¼šå»ºè®®å­˜å‚¨åœ¨å®‰å…¨çš„HttpOnly Cookieä¸­

### æƒé™æ§åˆ¶

- **é»˜è®¤ç®¡ç†å‘˜**ï¼šæ‹¥æœ‰æ‰€æœ‰æƒé™
- **æƒé™ç±»å‹**ï¼šSUPER_ADMINï¼ˆè¶…çº§ç®¡ç†å‘˜ï¼‰
- **æƒé™èŒƒå›´**ï¼šå¯ä»¥ç®¡ç†æ‰€æœ‰ç”¨æˆ·ã€é…ç½®ã€æ•°æ®

---

## â“ å¸¸è§é—®é¢˜

### Q1: å¿˜è®°ç®¡ç†å‘˜å¯†ç æ€ä¹ˆåŠï¼Ÿ

**A**: å¦‚æœæ‚¨å¿˜è®°äº†ç®¡ç†å‘˜å¯†ç ï¼š

1. **æ–¹æ³•ä¸€ï¼šé€šè¿‡æ•°æ®åº“é‡ç½®**
   ```sql
   -- ä½¿ç”¨BCryptåŠ å¯†æ–°å¯†ç 
   -- æ–°å¯†ç ï¼šYourNewPassword123!
   UPDATE admin_users
   SET password = '$2a$10$...'
   WHERE username = 'admin';
   ```

2. **æ–¹æ³•äºŒï¼šåˆ é™¤åé‡å»º**ï¼ˆä¸æ¨èï¼‰
   ```sql
   DELETE FROM admin_users WHERE username = 'admin';
   -- é‡å¯æœåŠ¡ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºé»˜è®¤ç®¡ç†å‘˜
   ```

### Q2: å¦‚ä½•ä¿®æ”¹ç®¡ç†å‘˜å¯†ç ï¼Ÿ

**A**: å¦‚æœç³»ç»Ÿæä¾›äº†ä¿®æ”¹å¯†ç APIï¼š

```bash
curl -X PUT https://zhitoujianli.com/api/admin/auth/change-password \
  -H "Authorization: Bearer <TOKEN>" \
  -H "Content-Type: application/json" \
  -d '{
    "oldPassword": "Zhitou!@#1031",
    "newPassword": "YourNewPassword123!"
  }'
```

### Q3: å¯ä»¥åˆ›å»ºå¤šä¸ªç®¡ç†å‘˜å—ï¼Ÿ

**A**: å¯ä»¥ã€‚è¶…çº§ç®¡ç†å‘˜å¯ä»¥åˆ›å»ºå…¶ä»–ç®¡ç†å‘˜è´¦å·ï¼š

```bash
curl -X POST https://zhitoujianli.com/api/admin/admins \
  -H "Authorization: Bearer <SUPER_ADMIN_TOKEN>" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "new_admin",
    "password": "NewAdminPassword123!",
    "adminType": "PLATFORM_ADMIN",
    "permissions": {
      "user_management_read": true,
      "user_management_update": true
    }
  }'
```

### Q4: Tokenè¿‡æœŸæ€ä¹ˆåŠï¼Ÿ

**A**: Tokené»˜è®¤æœ‰æ•ˆæœŸä¸º24å°æ—¶ã€‚å¦‚æœè¿‡æœŸï¼š

1. é‡æ–°ç™»å½•è·å–æ–°Token
2. ä½¿ç”¨æ–°Tokenè®¿é—®åå°

---

## ğŸ“‹ å¿«é€Ÿæµ‹è¯•

### æµ‹è¯•ç™»å½•

```bash
# 1. ç™»å½•
TOKEN=$(curl -X POST https://zhitoujianli.com/api/admin/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"Zhitou!@#1031"}' \
  | grep -o '"token":"[^"]*"' | cut -d'"' -f4)

# 2. è®¿é—®ä»ªè¡¨æ¿
curl -X GET https://zhitoujianli.com/api/admin/dashboard \
  -H "Authorization: Bearer $TOKEN"
```

å¦‚æœè¿”å›æ•°æ®è€Œä¸æ˜¯é”™è¯¯ï¼Œè¯´æ˜ç™»å½•æˆåŠŸï¼

---

## ğŸš¨ é‡è¦æé†’

1. **é»˜è®¤å¯†ç ä»…ç”¨äºé¦–æ¬¡ç™»å½•**
   - å»ºè®®ç™»å½•åç«‹å³ä¿®æ”¹å¯†ç 
   - ä¸è¦åœ¨å…¬å¼€åœºåˆæ³„éœ²é»˜è®¤å¯†ç 

2. **ä¿æŠ¤å¥½Token**
   - ä¸è¦å°†Tokenæäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
   - ä¸è¦åœ¨æ—¥å¿—ä¸­è®°å½•Token
   - ä½¿ç”¨HTTPSä¼ è¾“Token

3. **å®šæœŸå®¡æŸ¥ç®¡ç†å‘˜è´¦å·**
   - åˆ é™¤ä¸å†éœ€è¦çš„ç®¡ç†å‘˜è´¦å·
   - å®šæœŸæ›´æ¢å¯†ç 
   - ç›‘æ§ç®¡ç†å‘˜ç™»å½•æ—¥å¿—

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-10-29
**ç»´æŠ¤è€…**: æ™ºæŠ•ç®€å†å¼€å‘å›¢é˜Ÿ

