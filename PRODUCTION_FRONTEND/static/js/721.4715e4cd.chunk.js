"use strict";(self.webpackChunkzhitoujianli_website=self.webpackChunkzhitoujianli_website||[]).push([[721],{386:(e,t,s)=>{s.d(t,{P:()=>i});var a=s(8957),r=s(8878),o=s(1966),n=s(5055);const l=o.A.create({baseURL:n.Ay.apiBaseUrl,timeout:n.Ay.requestTimeout,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{const t=localStorage.getItem(n.PT.TOKEN_KEY)||localStorage.getItem(n.PT.AUTH_TOKEN_KEY);return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e));const c={startBossTask:async()=>{try{return(await l.post("/boss/start-task")).data}catch(s){var e,t;throw console.error("\u542f\u52a8Boss\u4efb\u52a1\u5931\u8d25:",s),new Error((null===(e=s.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"\u542f\u52a8Boss\u4efb\u52a1\u5931\u8d25")}},stopBossTask:async()=>{try{return(await l.post("/boss/stop-task")).data}catch(s){var e,t;throw console.error("\u505c\u6b62Boss\u4efb\u52a1\u5931\u8d25:",s),new Error((null===(e=s.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"\u505c\u6b62Boss\u4efb\u52a1\u5931\u8d25")}},getBossStatus:async()=>{try{return(await l.get("/boss/status")).data}catch(s){var e,t;throw console.error("\u83b7\u53d6Boss\u72b6\u6001\u5931\u8d25:",s),new Error((null===(e=s.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"\u83b7\u53d6\u72b6\u6001\u5931\u8d25")}},getBossLogs:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;try{return(await l.get("/boss/logs?lines=".concat(e))).data}catch(a){var t,s;throw console.error("\u83b7\u53d6Boss\u65e5\u5fd7\u5931\u8d25:",a),new Error((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"\u83b7\u53d6\u65e5\u5fd7\u5931\u8d25")}},getUserConfig:async()=>{try{return(await l.get("/boss/config")).data}catch(s){var e,t;throw console.error("\u83b7\u53d6\u7528\u6237\u914d\u7f6e\u5931\u8d25:",s),new Error((null===(e=s.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"\u83b7\u53d6\u914d\u7f6e\u5931\u8d25")}},saveUserConfig:async e=>{try{return(await l.post("/boss/save-config",e)).data}catch(a){var t,s;throw console.error("\u4fdd\u5b58\u7528\u6237\u914d\u7f6e\u5931\u8d25:",a),new Error((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"\u4fdd\u5b58\u914d\u7f6e\u5931\u8d25")}}},i=()=>{const[e,t]=(0,r.useState)({isRunning:!1}),[s,o]=(0,r.useState)(!1),[n,l]=(0,r.useState)(""),[i,d]=(0,r.useState)([]),u=async()=>{try{const e=await c.getBossStatus();t(e)}catch(e){console.error("\u83b7\u53d6\u72b6\u6001\u5931\u8d25:",e)}};return(0,r.useEffect)(()=>{u();const e=setInterval(u,3e4);return()=>clearInterval(e)},[]),{status:e,loading:s,message:n,logs:i,fetchStatus:u,fetchLogs:async()=>{try{const e=await fetch("/api/delivery/logs?lines=100",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),t=await e.json();t.success&&t.data.logs?d(t.data.logs):d(["\u6682\u65e0\u65e5\u5fd7\u6570\u636e"])}catch(e){console.error("\u83b7\u53d6\u65e5\u5fd7\u5931\u8d25:",e),d(["\u83b7\u53d6\u65e5\u5fd7\u5931\u8d25: "+e.message])}},handleStart:async()=>{o(!0),l("");try{const e=await fetch("/api/delivery/start",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),t=await e.json();t.success?(l("Boss\u6295\u9012\u4efb\u52a1\u542f\u52a8\u6210\u529f\uff01\u5f00\u59cb\u81ea\u52a8\u6295\u9012\u7b80\u5386..."),setTimeout(()=>{u()},1e3)):l("\u542f\u52a8\u5931\u8d25: ".concat(t.message))}catch(e){l("\u542f\u52a8\u5931\u8d25: ".concat(e.message))}finally{o(!1)}},handleStop:async()=>{o(!0),l("");try{const e=await fetch("/api/delivery/stop",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),s=await e.json();s.success?(l("Boss\u6295\u9012\u4efb\u52a1\u5df2\u505c\u6b62"),t(e=>(0,a.A)((0,a.A)({},e),{},{isRunning:!1})),setTimeout(()=>{u()},500),setTimeout(()=>{u()},2e3)):l("\u505c\u6b62\u5931\u8d25: ".concat(s.message))}catch(e){l("\u505c\u6b62\u5931\u8d25: ".concat(e.message))}finally{o(!1)}}}}},1304:(e,t,s)=>{s.d(t,{p:()=>o});var a=s(8957),r=s(8878);const o=()=>{const[e,t]=(0,r.useState)({showQRModal:!1,qrCodeUrl:"",loginStatus:"not_started",qrcodeCheckInterval:null}),s=async()=>{try{const e=(new Date).getTime(),s="/api/boss/login/qrcode?format=base64&t=".concat(e),r=async()=>{var e,t,a;const r=await fetch(s,{headers:{Accept:"application/json"}});if(404===r.status)throw new Error("404");if(!r.ok)throw new Error("status:".concat(r.status));const o=await r.json();if("string"===typeof o)return o;const n=(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.qrcodeBase64)||(null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.image)||(null===o||void 0===o?void 0:o.qrcodeBase64)||(null===o||void 0===o?void 0:o.image)||null;return n&&(null===(a=null===o||void 0===o?void 0:o.success)||void 0===a||a)?n:null},o=await async function(e){let t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,a=0;for(;a<s;)try{return await e()}catch(o){var r;t=o;const e=((null===o||void 0===o?void 0:o.message)||"").includes("ERR_HTTP2_PROTOCOL_ERROR"),s=null===o||void 0===o||null===(r=o.response)||void 0===r?void 0:r.status;if(s&&s<500&&!e)break;const n=Math.min(4e3,500*Math.pow(2,a));await new Promise(e=>setTimeout(e,n)),a+=1}throw t}(r,4).catch(e=>{if(String(null===e||void 0===e?void 0:e.message).includes("404"))return null;throw e});if(o){const e=o.startsWith("data:")?o:"data:image/png;base64,".concat(o);t(t=>(0,a.A)((0,a.A)({},t),{},{qrCodeUrl:e})),console.log("\u4e8c\u7ef4\u7801\u5df2\u52a0\u8f7d(base64)")}else console.debug("\u4e8c\u7ef4\u7801\u672a\u5c31\u7eea\uff0c\u7b49\u5f85\u4e0b\u4e00\u6b21\u8f6e\u8be2")}catch(e){console.error("\u52a0\u8f7d\u4e8c\u7ef4\u7801\u5931\u8d25:",e)}},o=async()=>{try{const s=await fetch("/api/boss/login/status"),r=await s.json();switch(r.isInProgress&&r.elapsedSeconds&&console.log("\u767b\u5f55\u6d41\u7a0b\u8fdb\u884c\u4e2d: ".concat(r.elapsedSeconds,"\u79d2")),t(e=>(0,a.A)((0,a.A)({},e),{},{loginStatus:r.status})),r.status){case"success":e.qrcodeCheckInterval&&(clearInterval(e.qrcodeCheckInterval),t(e=>(0,a.A)((0,a.A)({},e),{},{qrcodeCheckInterval:null}))),setTimeout(()=>{t(e=>(0,a.A)((0,a.A)({},e),{},{showQRModal:!1}))},2e3);break;case"failed":e.qrcodeCheckInterval&&(clearInterval(e.qrcodeCheckInterval),t(e=>(0,a.A)((0,a.A)({},e),{},{qrcodeCheckInterval:null})))}}catch(s){console.error("\u68c0\u67e5\u767b\u5f55\u72b6\u6001\u5931\u8d25:",s)}},n=()=>{e.qrcodeCheckInterval&&clearInterval(e.qrcodeCheckInterval),s(),o();const r=setInterval(()=>{s(),o()},2e3);t(e=>(0,a.A)((0,a.A)({},e),{},{qrcodeCheckInterval:r}))},l=async()=>{try{t(e=>(0,a.A)((0,a.A)({},e),{},{showQRModal:!0,qrCodeUrl:"",loginStatus:"not_started"}));const e=await fetch("/api/boss/login/start",{method:"POST",headers:{"Content-Type":"application/json"}}),s=await e.json();s.success?(console.log("\u767b\u5f55\u6d41\u7a0b\u5df2\u542f\u52a8"),t(e=>(0,a.A)((0,a.A)({},e),{},{loginStatus:"waiting"})),n()):"in_progress"===s.status?(t(e=>(0,a.A)((0,a.A)({},e),{},{loginStatus:"waiting"})),n()):t(e=>(0,a.A)((0,a.A)({},e),{},{showQRModal:!1}))}catch(e){console.error("\u542f\u52a8\u767b\u5f55\u5931\u8d25:",e),t(e=>(0,a.A)((0,a.A)({},e),{},{showQRModal:!1}))}};return(0,r.useEffect)(()=>()=>{e.qrcodeCheckInterval&&clearInterval(e.qrcodeCheckInterval)},[e.qrcodeCheckInterval]),{showQRModal:e.showQRModal,qrCodeUrl:e.qrCodeUrl,loginStatus:e.loginStatus,handleQRCodeLogin:l,closeQRModal:()=>{t(e=>(0,a.A)((0,a.A)({},e),{},{showQRModal:!1})),e.qrcodeCheckInterval&&(clearInterval(e.qrcodeCheckInterval),t(e=>(0,a.A)((0,a.A)({},e),{},{qrcodeCheckInterval:null})))},refreshQRCode:()=>{t(e=>(0,a.A)((0,a.A)({},e),{},{qrCodeUrl:"",loginStatus:"not_started"})),l()}}}},4721:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var a=s(8878),r=s(3780),o=s(2819),n=s(386),l=s(5735),c=s(1304),i=s(8667),d=s(7132),u=s(7248),g=s(782);const h=()=>{const e=(0,r.Zp)(),{user:t,isAuthenticated:s,isLoading:h}=(0,o.As)(),[x,m]=(0,a.useState)(!1),v=i.Ay.createChild("BossDelivery:Auth"),{showQRModal:b,qrCodeUrl:p,loginStatus:j,handleQRCodeLogin:f,closeQRModal:y,refreshQRCode:w}=(0,c.p)(),{status:N,message:A,logs:C,fetchLogs:k,handleStart:I,handleStop:S}=(0,n.P)(),{isLoggedIn:B,isLoading:T,error:q,refreshStatus:R}=(0,l.u)();if(v.debug("\u7ec4\u4ef6\u5f00\u59cb\u6e32\u67d3",{isLoading:h,isAuthenticated:s}),h)return v.debug("\u7b49\u5f85\u8ba4\u8bc1\u72b6\u6001\u786e\u8ba4..."),(0,g.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,g.jsx)("p",{className:"mt-4 text-gray-600",children:"\u52a0\u8f7d\u4e2d..."})]})});if(!s)return v.warn("\u672a\u8ba4\u8bc1\u7528\u6237\u5c1d\u8bd5\u8bbf\u95ee\u53d7\u4fdd\u62a4\u9875\u9762"),null;v.info("\u8ba4\u8bc1\u68c0\u67e5\u901a\u8fc7\uff0c\u6e32\u67d3\u7ec4\u4ef6",{userId:null===t||void 0===t?void 0:t.userId,email:null===t||void 0===t?void 0:t.email}),v.debug("\u5f00\u59cb\u52a0\u8f7dBoss\u6295\u9012\u6570\u636e");const E=e=>{let{title:t,value:s,icon:a,color:r,bgColor:o}=e;return(0,g.jsx)("div",{className:"".concat(o," rounded-lg p-6 shadow-sm"),children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-sm font-medium ".concat(r),children:t}),(0,g.jsx)("p",{className:"text-2xl font-bold ".concat(r),children:s})]}),(0,g.jsx)("div",{className:"text-3xl ".concat(r),children:a})]})})};return(0,g.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,g.jsx)(d.A,{}),(0,g.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,g.jsxs)("div",{className:"mb-8",children:[(0,g.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[(0,g.jsx)("span",{className:"text-red-500 mr-2",children:"\ud83d\ude80"}),"Boss\u76f4\u8058\u81ea\u52a8\u6295\u9012"]}),(0,g.jsx)("p",{className:"mt-2 text-gray-600",children:"\u667a\u80fd\u5316\u6c42\u804c\u6295\u9012\u5e73\u53f0\uff0c\u8ba9\u6c42\u804c\u66f4\u9ad8\u6548"})]}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,g.jsx)(E,{title:"\u4eca\u65e5\u6295\u9012",value:N.deliveryCount||0,icon:"\ud83d\udcca",color:"text-blue-600",bgColor:"bg-white"}),(0,g.jsx)(E,{title:"\u8fd0\u884c\u72b6\u6001",value:N.isRunning?"\u8fd0\u884c\u4e2d":"\u5df2\u505c\u6b62",icon:"\ud83d\udfe2",color:"text-green-600",bgColor:"bg-green-50"}),(0,g.jsx)(E,{title:"\u667a\u80fd\u5339\u914d",value:"AI",icon:"\ud83e\udd16",color:"text-purple-600",bgColor:"bg-purple-50"}),(0,g.jsx)(E,{title:"\u6301\u7eed\u8fd0\u884c",value:"24/7",icon:"\u23f0",color:"text-orange-600",bgColor:"bg-orange-50"})]}),!T&&(0,g.jsxs)("div",{className:"mb-6 p-4 rounded-lg ".concat(B?"bg-green-50 text-green-700 border border-green-200":"bg-yellow-50 text-yellow-700 border border-yellow-200"),children:[(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("span",{className:"text-lg mr-2",children:B?"\u2705":"\u26a0\ufe0f"}),(0,g.jsx)("p",{className:"text-sm font-medium",children:B?"Boss\u8d26\u53f7\u5df2\u767b\u5f55":"\u9700\u8981\u626b\u7801\u767b\u5f55Boss"})]}),(0,g.jsx)("button",{onClick:R,className:"text-xs px-3 py-1 rounded-full bg-white hover:bg-gray-50 transition-colors",children:"\ud83d\udd04 \u5237\u65b0\u72b6\u6001"})]}),q&&(0,g.jsxs)("p",{className:"text-xs mt-1 text-red-600",children:["\u68c0\u67e5\u72b6\u6001\u5931\u8d25: ",q]})]}),(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[(0,g.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[(0,g.jsx)("span",{className:"text-blue-500 mr-2",children:"\ud83d\udccb"}),"\u5de5\u4f5c\u6d41\u7a0b"]}),(0,g.jsx)(u.A,{steps:(()=>{const t="success"===j,s=N.isRunning;return[{id:"config",label:"\u914d\u7f6e\u7ba1\u7406",icon:"\u2699\ufe0f",description:"\u8bbe\u7f6e\u6295\u9012\u53c2\u6570\u548c\u7b80\u5386\u5185\u5bb9",status:"completed",action:()=>e("/config")},{id:"login",label:B?"\u5df2\u767b\u5f55Boss":"\u626b\u7801\u767b\u5f55Boss",icon:B?"\u2705":"\ud83d\udcf1",description:B?"Boss\u8d26\u53f7\u5df2\u767b\u5f55\uff0c\u53ef\u76f4\u63a5\u542f\u52a8\u6295\u9012":"\u4f7f\u7528\u624b\u673aApp\u626b\u63cf\u4e8c\u7ef4\u7801\u767b\u5f55",status:B?"completed":"active",action:B?void 0:f},{id:"start",label:"\u542f\u52a8\u81ea\u52a8\u6295\u9012",icon:"\u25b6\ufe0f",description:"\u5f00\u59cb\u667a\u80fd\u6295\u9012\u7b80\u5386",status:s?"completed":B||t?"active":"pending",disabled:!(B||t)||s,action:I},{id:"logs",label:"\u67e5\u770b\u65e5\u5fd7",icon:"\ud83d\udccb",description:"\u76d1\u63a7\u6295\u9012\u72b6\u6001\u548c\u7ed3\u679c",status:s?"active":"pending",action:async()=>{await k(),m(!0)}},{id:"stop",label:"\u505c\u6b62\u6295\u9012",icon:"\u23f9\ufe0f",description:"\u505c\u6b62\u81ea\u52a8\u6295\u9012\u4efb\u52a1",status:s?"active":"pending",disabled:!s,action:S}]})(),currentStep:N.isRunning?3:B||"success"===j?2:1})]}),A&&(0,g.jsx)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,g.jsx)("p",{className:"text-blue-800",children:A})}),(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,g.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,g.jsx)("span",{className:"text-yellow-500 mr-2",children:"\ud83d\udca1"}),"\u529f\u80fd\u8bf4\u660e"]}),(0,g.jsxs)("ul",{className:"space-y-2 text-gray-600",children:[(0,g.jsxs)("li",{className:"flex items-center",children:[(0,g.jsx)("span",{className:"text-green-500 mr-2",children:"\u2713"}),"AI\u667a\u80fd\u5339\u914d\u804c\u4f4d\uff0c\u63d0\u9ad8\u6295\u9012\u6210\u529f\u7387"]}),(0,g.jsxs)("li",{className:"flex items-center",children:[(0,g.jsx)("span",{className:"text-green-500 mr-2",children:"\u2713"}),"\u81ea\u52a8\u751f\u6210\u4e2a\u6027\u5316\u6253\u62db\u547c\u8bed"]}),(0,g.jsxs)("li",{className:"flex items-center",children:[(0,g.jsx)("span",{className:"text-green-500 mr-2",children:"\u2713"}),"\u652f\u6301\u6279\u91cf\u6295\u9012\uff0c24/7\u6301\u7eed\u8fd0\u884c"]}),(0,g.jsxs)("li",{className:"flex items-center",children:[(0,g.jsx)("span",{className:"text-green-500 mr-2",children:"\u2713"}),"\u5b9e\u65f6\u76d1\u63a7\u6295\u9012\u72b6\u6001\u548c\u7edf\u8ba1"]}),(0,g.jsxs)("li",{className:"flex items-center",children:[(0,g.jsx)("span",{className:"text-green-500 mr-2",children:"\u2713"}),"\u667a\u80fd\u8fc7\u6ee4\u9ed1\u540d\u5355\u516c\u53f8\u548c\u65e0\u6548\u5c97\u4f4d"]})]})]})]}),b&&(0,g.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,g.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-2xl w-full mx-4",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,g.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"\u626b\u7801\u767b\u5f55Boss\u76f4\u8058"}),(0,g.jsx)("button",{onClick:y,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\u2715"})]}),(0,g.jsx)("div",{className:"text-center",children:p?(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"mb-6 flex justify-center",children:(0,g.jsx)("img",{src:p,alt:"\u767b\u5f55\u4e8c\u7ef4\u7801",className:"rounded-xl shadow-2xl",style:{width:"600px",height:"600px",objectFit:"cover",objectPosition:"center center"}})}),(0,g.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:"\ud83d\udcf1 \u8bf7\u4f7f\u7528Boss\u76f4\u8058App\u626b\u63cf\u4e0a\u65b9\u4e8c\u7ef4\u7801\u767b\u5f55"}),(0,g.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,g.jsx)("button",{onClick:w,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-lg font-medium",children:"\ud83d\udd04 \u5237\u65b0\u4e8c\u7ef4\u7801"}),(0,g.jsx)("button",{onClick:y,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-lg font-medium",children:"\u53d6\u6d88"})]})]}):(0,g.jsxs)("div",{className:"py-12",children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-6"}),(0,g.jsx)("p",{className:"text-lg text-gray-600",children:"\u6b63\u5728\u751f\u6210\u4e8c\u7ef4\u7801..."})]})})]})}),x&&(0,g.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,g.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full mx-4 max-h-96 overflow-hidden",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold",children:"\u6295\u9012\u65e5\u5fd7"}),(0,g.jsx)("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,g.jsx)("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg h-64 overflow-y-auto font-mono text-sm",children:C.length>0?C.map((e,t)=>(0,g.jsx)("div",{className:"mb-1",children:e},t)):(0,g.jsx)("div",{children:"\u6682\u65e0\u65e5\u5fd7\u6570\u636e"})})]})})]})}},5735:(e,t,s)=>{s.d(t,{u:()=>o});var a=s(8957),r=s(8878);const o=()=>{const[e,t]=(0,r.useState)({isLoggedIn:!1,isLoading:!0,error:null,lastChecked:null}),s=async()=>{try{t(e=>(0,a.A)((0,a.A)({},e),{},{isLoading:!0,error:null}));const e=await fetch("/api/boss/login/check-status",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("authToken")),"Content-Type":"application/json"}});if(!e.ok)throw new Error("HTTP ".concat(e.status,": ").concat(e.statusText));const s=await e.json();if(!s.success)throw new Error(s.message||"\u68c0\u67e5\u767b\u5f55\u72b6\u6001\u5931\u8d25");t({isLoggedIn:s.isLoggedIn,isLoading:!1,error:null,lastChecked:new Date}),console.log("Boss\u767b\u5f55\u72b6\u6001\u68c0\u67e5\u5b8c\u6210: ".concat(s.isLoggedIn?"\u5df2\u767b\u5f55":"\u9700\u8981\u767b\u5f55"))}catch(e){console.error("\u68c0\u67e5Boss\u767b\u5f55\u72b6\u6001\u5931\u8d25:",e),t(t=>(0,a.A)((0,a.A)({},t),{},{isLoading:!1,error:e.message||"\u68c0\u67e5\u767b\u5f55\u72b6\u6001\u5931\u8d25"}))}};(0,r.useEffect)(()=>{s()},[]);return(0,a.A)((0,a.A)({},e),{},{refreshStatus:()=>{s()}})}},7248:(e,t,s)=>{s.d(t,{A:()=>o});var a=s(8878),r=s(782);const o=e=>{let{steps:t}=e;const s=e=>{const t="flex flex-col items-center p-6 rounded-lg shadow-md transition-all duration-300 cursor-pointer";if(e.disabled)return"".concat(t," bg-gray-100 text-gray-400 cursor-not-allowed opacity-60");switch(e.status){case"completed":return"".concat(t," bg-green-50 border-2 border-green-200 hover:shadow-lg hover:bg-green-100");case"active":return"".concat(t," bg-blue-50 border-2 border-blue-600 hover:shadow-lg hover:bg-blue-100 animate-pulse");default:return"".concat(t," bg-white border-2 border-gray-200 hover:shadow-lg hover:bg-gray-50")}},o=e=>{const t="w-12 h-12 rounded-full flex items-center justify-center text-2xl font-bold mb-3";if(e.disabled)return"".concat(t," bg-gray-200 text-gray-400");switch(e.status){case"completed":return"".concat(t," bg-green-600 text-white");case"active":return"".concat(t," bg-blue-600 text-white");default:return"".concat(t," bg-gray-200 text-gray-600")}},n=(e,t)=>{const s="flex items-center justify-center text-2xl font-bold";return e.disabled||t.disabled?"".concat(s," text-gray-300"):"completed"===e.status?"".concat(s," text-green-500"):"".concat(s," text-gray-400")},l=e=>{!e.disabled&&e.action&&e.action()};return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("div",{className:"hidden md:flex items-center justify-center w-full gap-4",children:t.map((e,c)=>(0,r.jsxs)(a.Fragment,{children:[(0,r.jsxs)("div",{className:"w-64 ".concat(s(e)),onClick:()=>l(e),title:e.disabled?"\u6b64\u6b65\u9aa4\u6682\u65f6\u4e0d\u53ef\u7528":e.description,children:[(0,r.jsx)("div",{className:o(e),children:"completed"===e.status?"\u2713":e.icon}),(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2 ".concat(e.disabled?"text-gray-400":"completed"===e.status?"text-green-800":"active"===e.status?"text-blue-800":"text-gray-800"),children:e.label}),(0,r.jsx)("p",{className:"text-sm text-center ".concat(e.disabled?"text-gray-400":"completed"===e.status?"text-green-600":"active"===e.status?"text-blue-600":"text-gray-600"),children:e.description})]}),c<t.length-1&&(0,r.jsx)("div",{className:"flex-shrink-0 ".concat(n(e,t[c+1])),children:"\u2192"})]},e.id))}),(0,r.jsx)("div",{className:"md:hidden space-y-4",children:t.map((e,c)=>(0,r.jsxs)(a.Fragment,{children:[(0,r.jsx)("div",{className:"w-full ".concat(s(e)),onClick:()=>l(e),title:e.disabled?"\u6b64\u6b65\u9aa4\u6682\u65f6\u4e0d\u53ef\u7528":e.description,children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:o(e),children:"completed"===e.status?"\u2713":e.icon}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-1 ".concat(e.disabled?"text-gray-400":"completed"===e.status?"text-green-800":"active"===e.status?"text-blue-800":"text-gray-800"),children:e.label}),(0,r.jsx)("p",{className:"text-sm ".concat(e.disabled?"text-gray-400":"completed"===e.status?"text-green-600":"active"===e.status?"text-blue-600":"text-gray-600"),children:e.description})]})]})}),c<t.length-1&&(0,r.jsx)("div",{className:"flex justify-center ".concat(n(e,t[c+1])),children:"\u2193"})]},e.id))})]})}}}]);