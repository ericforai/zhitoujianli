"use strict";(self.webpackChunkzhitoujianli_website=self.webpackChunkzhitoujianli_website||[]).push([[211],{3845:(e,s,t)=>{t.d(s,{px:()=>r,vy:()=>l});var a=t(8409);const l={parseResume:async e=>(await a.A.post("/candidate-resume/parse",{resume_text:e})).data.data,uploadResume:async e=>{const s=new FormData;s.append("file",e);return(await a.A.post("/candidate-resume/upload",s,{headers:{"Content-Type":"multipart/form-data"}})).data.data},checkResume:async()=>(await a.A.get("/candidate-resume/check")).data,loadResume:async()=>(await a.A.get("/candidate-resume/load")).data.data,deleteResume:async()=>(await a.A.post("/candidate-resume/delete")).data},r={generateGreeting:async e=>(await a.A.post("/smart-greeting/generate",{candidate:e.candidate,job_name:e.jobName,job_description:e.jobDescription})).data.greeting,generateDefaultGreeting:async e=>(await a.A.post("/candidate-resume/generate-default-greeting",{candidate:e})).data.greeting,saveDefaultGreeting:async e=>(await a.A.post("/candidate-resume/save-default-greeting",{greeting:e})).data,getDefaultGreeting:async()=>{try{return(await a.A.get("/candidate-resume/get-default-greeting")).data.greeting||""}catch(e){return console.log("\u83b7\u53d6\u9ed8\u8ba4\u6253\u62db\u547c\u8bed\u5931\u8d25\uff0c\u53ef\u80fd\u5c1a\u672a\u8bbe\u7f6e"),""}}}},9211:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var a=t(8878),l=t(9992),r=t(7132),n=t(3845),i=t(782);const c=e=>{var s,t;let{onResumeSaved:l}=e;const[r,c]=(0,a.useState)(null),[o,d]=(0,a.useState)(""),[m,x]=(0,a.useState)(!1),[u,g]=(0,a.useState)(null),[h,p]=(0,a.useState)(null),[b,f]=(0,a.useState)(!1),[j,y]=(0,a.useState)(""),v=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(h||u){const e=setTimeout(()=>{p(null),g(null)},3e3);return()=>clearTimeout(e)}},[h,u]),(0,a.useEffect)(()=>{console.log("\ud83d\udd04 CompleteResumeManager\u7ec4\u4ef6\u5df2\u6302\u8f7d\uff0c\u5f00\u59cb\u52a0\u8f7d\u5df2\u4fdd\u5b58\u7684\u9ed8\u8ba4\u62db\u547c\u8bed...");(async()=>{try{console.log("\ud83d\udce1 \u6b63\u5728\u8bf7\u6c42\u540e\u7aefAPI: /api/candidate-resume/get-default-greeting");const e=await n.px.getDefaultGreeting();console.log("\ud83d\udce5 \u540e\u7aef\u8fd4\u56de\u62db\u547c\u8bed:",e),e?(console.log("\ud83d\udd04 \u51c6\u5907\u8bbe\u7f6e\u9ed8\u8ba4\u62db\u547c\u8bed\u72b6\u6001"),d(e),console.log("\u2705 \u5df2\u52a0\u8f7d\u4fdd\u5b58\u7684\u9ed8\u8ba4\u62db\u547c\u8bed:",e),console.log("\ud83d\udd04 \u72b6\u6001\u8bbe\u7f6e\u5b8c\u6210\uff0c\u65b0\u72b6\u6001:",e)):console.log("\u26a0\ufe0f \u540e\u7aef\u8fd4\u56de\u7684\u62db\u547c\u8bed\u4e3a\u7a7a")}catch(u){console.error("\u274c \u52a0\u8f7d\u9ed8\u8ba4\u62db\u547c\u8bed\u5931\u8d25:",u),console.log("\u672a\u627e\u5230\u5df2\u4fdd\u5b58\u7684\u9ed8\u8ba4\u62db\u547c\u8bed")}})()},[]),(0,a.useEffect)(()=>{console.log("\ud83d\udd04 \u9ed8\u8ba4\u62db\u547c\u8bed\u72b6\u6001\u53d1\u751f\u53d8\u5316:",o)},[o]);const N=async e=>{try{console.log("\ud83e\udd16 \u5f00\u59cb\u751f\u6210\u9ed8\u8ba4\u6253\u62db\u547c\u8bed");const t=await n.px.generateDefaultGreeting(e);if(console.log("\u2705 \u9ed8\u8ba4\u6253\u62db\u547c\u8bed\u751f\u6210\u6210\u529f:",t),d(t),t&&t.trim())try{console.log("\ud83d\udcbe \u81ea\u52a8\u4fdd\u5b58\u9ed8\u8ba4\u6253\u62db\u547c\u8bed\u5230\u540e\u7aef"),await n.px.saveDefaultGreeting(t),console.log("\u2705 \u9ed8\u8ba4\u6253\u62db\u547c\u8bed\u5df2\u81ea\u52a8\u4fdd\u5b58")}catch(s){console.error("\u274c \u81ea\u52a8\u4fdd\u5b58\u5931\u8d25:",s)}}catch(u){console.error("\u274c \u9ed8\u8ba4\u6253\u62db\u547c\u8bed\u751f\u6210\u5931\u8d25:",u),g("\u9ed8\u8ba4\u6253\u62db\u547c\u8bed\u751f\u6210\u5931\u8d25: ".concat(u.message||"\u672a\u77e5\u9519\u8bef"))}};return(0,i.jsxs)("div",{className:"space-y-6",children:[(h||u)&&(0,i.jsx)("div",{className:"fixed top-20 right-4 z-50 max-w-sm",children:(0,i.jsxs)("div",{className:"p-4 rounded-lg shadow-lg border flex items-center justify-between ".concat(h?"bg-green-50 text-green-800 border-green-200":"bg-red-50 text-red-800 border-red-200"),children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"mr-3 text-lg ".concat(h?"text-green-600":"text-red-600"),children:h?"\u2705":"\u274c"}),(0,i.jsx)("span",{className:"font-medium",children:h||u})]}),(0,i.jsx)("button",{onClick:()=>{p(null),g(null)},className:"ml-4 text-gray-400 hover:text-gray-600 text-lg",title:"\u5173\u95ed",children:"\xd7"})]})}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"\u7b80\u5386\u7ba1\u7406"}),(0,i.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"\u4e0a\u4f20\u3001\u7f16\u8f91\u548c\u7ba1\u7406\u60a8\u7684\u7b80\u5386\u4fe1\u606f\uff0c\u4e3a\u667a\u80fd\u6295\u9012\u505a\u51c6\u5907"})]}),(0,i.jsxs)("button",{onClick:()=>window.history.back(),className:"flex items-center px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"\u8fd4\u56de\u4e3b\u9875"]})]}),m&&(0,i.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,i.jsx)("span",{className:"ml-2 text-gray-600",children:"\u5904\u7406\u4e2d..."})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,i.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"\u4e0a\u4f20\u7b80\u5386"}),(0,i.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-gray-400 transition-colors",onDragOver:e=>e.preventDefault(),onDrop:e=>{e.preventDefault();const s=e.dataTransfer.files;if(s.length>0){const e=s[0];if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"].includes(e.type)&&!e.name.match(/\.(pdf|doc|docx|txt)$/i))return void g("\u4e0d\u652f\u6301\u7684\u6587\u4ef6\u683c\u5f0f\uff0c\u8bf7\u4e0a\u4f20PDF\u3001DOC\u3001DOCX\u3001TXT\u6587\u4ef6");if(e.size>10485760)return void g("\u6587\u4ef6\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc710MB");(async()=>{x(!0),g(null),p(null);try{console.log("\ud83d\udce4 \u5f00\u59cb\u4e0a\u4f20\u7b80\u5386\u6587\u4ef6:",e.name);const s=await n.vy.uploadResume(e);console.log("\u2705 \u7b80\u5386\u89e3\u6790\u6210\u529f:",s),c(s),await N(s),p("\u7b80\u5386\u4e0a\u4f20\u5e76\u89e3\u6790\u6210\u529f\uff01"),l&&l(s)}catch(u){console.error("\u274c \u7b80\u5386\u4e0a\u4f20\u5931\u8d25:",u),g("\u7b80\u5386\u4e0a\u4f20\u5931\u8d25: ".concat(u.message||"\u672a\u77e5\u9519\u8bef"))}finally{x(!1)}})()}},children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"text-4xl",children:"\u2601\ufe0f"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-lg font-medium text-gray-900",children:"\u62d6\u62fd\u6587\u4ef6\u5230\u6b64\u5904\u6216\u70b9\u51fb\u4e0a\u4f20"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"\u652f\u6301 TXT\u3001PDF\u3001DOC\u3001DOCX \u683c\u5f0f\uff0c\u6587\u4ef6\u5927\u5c0f\u4e0d\u8d85\u8fc710MB | AI\u81ea\u52a8\u63d0\u53d6\u6587\u672c\u5185\u5bb9"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{ref:v,type:"file",accept:".pdf,.doc,.docx,.txt",onChange:async e=>{var s;const t=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!t)return;if(["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"].includes(t.type)||t.name.match(/\.(pdf|doc|docx|txt)$/i))if(t.size>10485760)g("\u6587\u4ef6\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc710MB");else{x(!0),g(null),p(null);try{console.log("\ud83d\udce4 \u5f00\u59cb\u4e0a\u4f20\u7b80\u5386\u6587\u4ef6:",t.name);const e=await n.vy.uploadResume(t);console.log("\u2705 \u7b80\u5386\u89e3\u6790\u6210\u529f:",e),c(e),await N(e),p("\u7b80\u5386\u4e0a\u4f20\u5e76\u89e3\u6790\u6210\u529f\uff01"),l&&l(e)}catch(u){console.error("\u274c \u7b80\u5386\u4e0a\u4f20\u5931\u8d25:",u),g("\u7b80\u5386\u4e0a\u4f20\u5931\u8d25: ".concat(u.message||"\u672a\u77e5\u9519\u8bef"))}finally{x(!1)}}else g("\u4e0d\u652f\u6301\u7684\u6587\u4ef6\u683c\u5f0f\uff0c\u8bf7\u4e0a\u4f20PDF\u3001DOC\u3001DOCX\u3001TXT\u6587\u4ef6")},className:"hidden"}),(0,i.jsx)("button",{onClick:()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.click()},disabled:m,className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"+ \u9009\u62e9\u6587\u4ef6"})]})]})}),(0,i.jsxs)("div",{className:"mt-6",children:[(0,i.jsxs)("div",{className:"flex items-center mb-4",children:[(0,i.jsx)("input",{type:"checkbox",id:"use-text-input",checked:b,onChange:e=>f(e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,i.jsx)("label",{htmlFor:"use-text-input",className:"ml-2 text-sm text-gray-700",children:"\u6216\u76f4\u63a5\u7c98\u8d34\u7b80\u5386\u6587\u672c:"})]}),b&&(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("textarea",{rows:8,value:j,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"\u8bf7\u7c98\u8d34\u60a8\u7684\u7b80\u5386\u5185\u5bb9...",disabled:m}),(0,i.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,i.jsx)("p",{className:"font-medium mb-2",children:"\u5efa\u8bae\u5305\u542b:"}),(0,i.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,i.jsx)("li",{children:"\u4e2a\u4eba\u4fe1\u606f(\u59d3\u540d\u3001\u804c\u4f4d)"}),(0,i.jsx)("li",{children:"\u5de5\u4f5c\u7ecf\u5386(\u516c\u53f8\u3001\u804c\u4f4d\u3001\u5e74\u9650)"}),(0,i.jsx)("li",{children:"\u6838\u5fc3\u6280\u80fd"}),(0,i.jsx)("li",{children:"\u4e3b\u8981\u6210\u5c31"}),(0,i.jsx)("li",{children:"\u6559\u80b2\u80cc\u666f"})]})]}),(0,i.jsxs)("div",{className:"flex space-x-4",children:[(0,i.jsx)("button",{onClick:async()=>{if(j.trim()){x(!0),g(null),p(null);try{console.log("\ud83d\udcdd \u5f00\u59cb\u89e3\u6790\u7b80\u5386\u6587\u672c");const e=await n.vy.parseResume(j);console.log("\u2705 \u7b80\u5386\u89e3\u6790\u6210\u529f:",e),c(e),await N(e),p("\u7b80\u5386\u89e3\u6790\u6210\u529f\uff01"),l&&l(e)}catch(u){console.error("\u274c \u7b80\u5386\u89e3\u6790\u5931\u8d25:",u),g("\u7b80\u5386\u89e3\u6790\u5931\u8d25: ".concat(u.message||"\u672a\u77e5\u9519\u8bef"))}finally{x(!1)}}else g("\u8bf7\u8f93\u5165\u7b80\u5386\u6587\u672c\u5185\u5bb9")},disabled:m||!j.trim(),className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"AI\u89e3\u6790\u7b80\u5386"}),r&&(0,i.jsx)("button",{onClick:async()=>{if(window.confirm("\u786e\u5b9a\u8981\u5220\u9664\u7b80\u5386\u5417\uff1f\u6b64\u64cd\u4f5c\u4e0d\u53ef\u6062\u590d\u3002"))try{console.log("\ud83d\uddd1\ufe0f \u5f00\u59cb\u5220\u9664\u7b80\u5386"),await n.vy.deleteResume(),console.log("\u2705 \u7b80\u5386\u5220\u9664\u6210\u529f"),c(null),d(""),p("\u7b80\u5386\u5220\u9664\u6210\u529f\uff01")}catch(u){console.error("\u274c \u5220\u9664\u5931\u8d25:",u),g("\u5220\u9664\u5931\u8d25: ".concat(u.message||"\u672a\u77e5\u9519\u8bef"))}},disabled:m,className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"\u5220\u9664\u7b80\u5386"})]})]})]})]}),r&&(0,i.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 rounded-lg p-6 text-white",children:[(0,i.jsx)("h4",{className:"text-xl font-semibold mb-6",children:"\u89e3\u6790\u7ed3\u679c"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h5",{className:"font-medium mb-4",children:"\u5019\u9009\u4eba\u4fe1\u606f:"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-blue-200",children:"\u5f53\u524d\u804c\u4f4d:"}),(0,i.jsx)("span",{className:"ml-2",children:r.current_title})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-blue-200",children:"\u5de5\u4f5c\u5e74\u9650:"}),(0,i.jsxs)("span",{className:"ml-2",children:[r.years_experience,"\u5e74"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-blue-200",children:"\u5b66\u5386:"}),(0,i.jsx)("span",{className:"ml-2",children:r.education})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-blue-200",children:"\u516c\u53f8:"}),(0,i.jsx)("span",{className:"ml-2",children:r.company||"\u672a\u586b\u5199"})]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h5",{className:"font-medium mb-4",children:"\u6838\u5fc3\u4f18\u52bf:"}),(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:null===(s=r.core_strengths)||void 0===s?void 0:s.map((e,s)=>(0,i.jsx)("span",{className:"bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm",children:e},s))})]})]}),(0,i.jsxs)("div",{className:"mt-6",children:[(0,i.jsx)("h5",{className:"font-medium mb-4",children:"\u6280\u80fd:"}),(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:null===(t=r.skills)||void 0===t?void 0:t.map((e,s)=>(0,i.jsx)("span",{className:"bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm",children:e},s))})]})]}),(r||o)&&(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,i.jsx)("h4",{className:"text-xl font-semibold text-gray-900 mb-4",children:"AI\u751f\u6210\u7684\u9ed8\u8ba4\u6253\u62db\u547c\u8bed"}),(0,i.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:(0,i.jsxs)("div",{className:"flex items-start",children:[(0,i.jsx)("svg",{className:"h-5 w-5 text-blue-400 mt-0.5 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,i.jsx)("div",{children:(0,i.jsx)("p",{className:"text-sm text-blue-800",children:"\u8bf4\u660e: \u57fa\u4e8e\u60a8\u7684\u7b80\u5386, AI\u5df2\u751f\u6210\u4e00\u6bb5\u901a\u7528\u7684\u6253\u62db\u547c\u8bed\u3002\u60a8\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528, \u4e5f\u53ef\u4ee5\u6839\u636e\u9700\u8981\u4fee\u6539\u3002"})})]})}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u9ed8\u8ba4\u6253\u62db\u547c\u8bed:"}),(0,i.jsx)("textarea",{rows:8,value:o,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"AI\u6b63\u5728\u751f\u6210\u9ed8\u8ba4\u6253\u62db\u547c\u8bed...",disabled:m})]}),(0,i.jsxs)("div",{className:"flex space-x-4",children:[(0,i.jsx)("button",{onClick:async()=>{if(o.trim())try{console.log("\ud83d\udcbe \u5f00\u59cb\u4fdd\u5b58\u9ed8\u8ba4\u6253\u62db\u547c\u8bed"),await n.px.saveDefaultGreeting(o),console.log("\u2705 \u9ed8\u8ba4\u6253\u62db\u547c\u8bed\u4fdd\u5b58\u6210\u529f"),p("\u9ed8\u8ba4\u6253\u62db\u547c\u8bed\u4fdd\u5b58\u6210\u529f\uff01")}catch(u){console.error("\u274c \u4fdd\u5b58\u5931\u8d25:",u),g("\u4fdd\u5b58\u5931\u8d25: ".concat(u.message||"\u672a\u77e5\u9519\u8bef"))}else g("\u6ca1\u6709\u53ef\u4fdd\u5b58\u7684\u6253\u62db\u547c\u8bed")},disabled:m||!o.trim(),className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"\u4fdd\u5b58\u4e3a\u9ed8\u8ba4\u62db\u547c\u8bed"}),(0,i.jsx)("button",{onClick:async()=>{if(r){x(!0),g(null);try{await N(r),p("\u9ed8\u8ba4\u6253\u62db\u547c\u8bed\u91cd\u65b0\u751f\u6210\u5e76\u4fdd\u5b58\u6210\u529f\uff01")}catch(u){console.error("\u274c \u91cd\u65b0\u751f\u6210\u5931\u8d25:",u),g("\u91cd\u65b0\u751f\u6210\u5931\u8d25: ".concat(u.message||"\u672a\u77e5\u9519\u8bef"))}finally{x(!1)}}else g("\u8bf7\u5148\u4e0a\u4f20\u7b80\u5386")},disabled:m,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"\u91cd\u65b0\u751f\u6210"})]})]})]})]})};var o=t(2819),d=t(8667);const m=()=>{const{user:e,isAuthenticated:s,isLoading:t}=(0,o.As)(),[n,m]=(0,a.useState)("delivery"),[x,u]=(0,a.useState)(null),[g,h]=(0,a.useState)(!0),[p,b]=(0,a.useState)(!1),[f,j]=(0,a.useState)(null),y=d.Ay.createChild("ConfigPage:Auth");if((0,a.useEffect)(()=>{y.debug("ConfigPage\u7ec4\u4ef6\u5f00\u59cb\u6e32\u67d3",{isLoading:t,isAuthenticated:s})},[t,s,y]),(0,a.useEffect)(()=>{if(!s||t)return;(async()=>{try{y.debug("\u5f00\u59cb\u52a0\u8f7d\u7528\u6237\u914d\u7f6e");const e=localStorage.getItem("authToken")||"test_token",s=await fetch("/api/config",{headers:{Authorization:"Bearer ".concat(e)}}),t=await s.json();t.success?(u(t.config.boss),j({type:"success",text:"\u914d\u7f6e\u52a0\u8f7d\u6210\u529f"}),y.info("\u914d\u7f6e\u52a0\u8f7d\u6210\u529f")):(j({type:"error",text:"\u914d\u7f6e\u52a0\u8f7d\u5931\u8d25: "+t.message}),y.error("\u914d\u7f6e\u52a0\u8f7d\u5931\u8d25",{message:t.message}))}catch(e){console.error("\u52a0\u8f7d\u914d\u7f6e\u5931\u8d25:",e),j({type:"error",text:"\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u8fde\u63a5"}),y.error("\u914d\u7f6e\u52a0\u8f7d\u7f51\u7edc\u9519\u8bef",e)}finally{h(!1)}})()},[s,t,y]),(0,a.useEffect)(()=>{if(f){const e=setTimeout(()=>{j(null)},3e3);return()=>clearTimeout(e)}},[f]),t)return y.debug("\u7b49\u5f85\u8ba4\u8bc1\u72b6\u6001\u786e\u8ba4..."),(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,i.jsx)("p",{className:"mt-4 text-gray-600",children:"\u52a0\u8f7d\u4e2d..."})]})});if(!s)return y.warn("\u672a\u8ba4\u8bc1\u7528\u6237\u5c1d\u8bd5\u8bbf\u95eeConfigPage\u9875\u9762"),null;y.info("ConfigPage\u8ba4\u8bc1\u68c0\u67e5\u901a\u8fc7\uff0c\u6e32\u67d3\u7ec4\u4ef6",{userId:null===e||void 0===e?void 0:e.userId,email:null===e||void 0===e?void 0:e.email});return(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,i.jsx)(r.A,{}),f&&(0,i.jsx)("div",{className:"fixed top-20 right-4 z-50 max-w-sm",children:(0,i.jsxs)("div",{className:"p-4 rounded-lg shadow-lg border flex items-center justify-between ".concat("success"===f.type?"bg-green-50 text-green-800 border-green-200":"bg-red-50 text-red-800 border-red-200"),children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"mr-3 text-lg ".concat("success"===f.type?"text-green-600":"text-red-600"),children:"success"===f.type?"\u2705":"\u274c"}),(0,i.jsx)("span",{className:"font-medium",children:f.text})]}),(0,i.jsx)("button",{onClick:()=>{j(null)},className:"ml-4 text-gray-400 hover:text-gray-600 text-lg",title:"\u5173\u95ed",children:"\xd7"})]})}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\u2699\ufe0f \u914d\u7f6e\u7ba1\u7406"}),(0,i.jsx)("p",{className:"text-gray-600",children:"\u7ba1\u7406\u6295\u9012\u53c2\u6570\u548c\u7b80\u5386\u5185\u5bb9\uff0c\u4f18\u5316\u6c42\u804c\u6548\u679c"})]}),(0,i.jsx)("div",{className:"mb-8",children:(0,i.jsx)("div",{className:"border-b border-gray-200",children:(0,i.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,i.jsx)("button",{onClick:()=>m("delivery"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("delivery"===n?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\ud83d\udccb \u6295\u9012\u53c2\u6570\u914d\u7f6e"}),(0,i.jsx)("button",{onClick:()=>m("resume"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("resume"===n?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\ud83d\udcc4 \u7b80\u5386\u5185\u5bb9\u7ba1\u7406"})]})})}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-sm",children:g?(0,i.jsxs)("div",{className:"p-8 text-center",children:[(0,i.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,i.jsx)("p",{className:"mt-2 text-gray-600",children:"\u52a0\u8f7d\u914d\u7f6e\u4e2d..."})]}):(0,i.jsxs)(i.Fragment,{children:["delivery"===n&&x&&(0,i.jsx)(l.A,{config:x,onConfigChange:async e=>{b(!0),j(null);try{y.debug("\u5f00\u59cb\u4fdd\u5b58\u7528\u6237\u914d\u7f6e");const s=await fetch("/api/config",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("authToken")||"test_token")},body:JSON.stringify({boss:e})}),t=await s.json();t.success?(u(e),j({type:"success",text:"\u914d\u7f6e\u4fdd\u5b58\u6210\u529f"}),y.info("\u914d\u7f6e\u4fdd\u5b58\u6210\u529f")):(j({type:"error",text:"\u4fdd\u5b58\u5931\u8d25: "+t.message}),y.error("\u914d\u7f6e\u4fdd\u5b58\u5931\u8d25",{message:t.message}))}catch(s){console.error("\u4fdd\u5b58\u914d\u7f6e\u5931\u8d25:",s),j({type:"error",text:"\u7f51\u7edc\u9519\u8bef\uff0c\u4fdd\u5b58\u5931\u8d25"}),y.error("\u914d\u7f6e\u4fdd\u5b58\u7f51\u7edc\u9519\u8bef",s)}finally{b(!1)}},loading:p}),"resume"===n&&(0,i.jsx)("div",{className:"p-6",children:(0,i.jsx)(c,{})})]})}),(0,i.jsxs)("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"\ud83d\udca1 \u4f7f\u7528\u63d0\u793a"}),(0,i.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,i.jsxs)("li",{children:["\u2022 ",(0,i.jsx)("strong",{children:"\u6295\u9012\u53c2\u6570\u914d\u7f6e"}),"\uff1a\u8bbe\u7f6e\u641c\u7d22\u5173\u952e\u8bcd\u3001\u76ee\u6807\u57ce\u5e02\u3001\u85aa\u8d44\u8303\u56f4\u7b49\uff0c\u5f71\u54cd\u81ea\u52a8\u6295\u9012\u7684\u5c97\u4f4d\u7b5b\u9009"]}),(0,i.jsxs)("li",{children:["\u2022 ",(0,i.jsx)("strong",{children:"\u7b80\u5386\u5185\u5bb9\u7ba1\u7406"}),"\uff1a\u4e0a\u4f20\u548c\u7f16\u8f91\u7b80\u5386\uff0cAI\u5c06\u57fa\u4e8e\u7b80\u5386\u5185\u5bb9\u751f\u6210\u4e2a\u6027\u5316\u6253\u62db\u547c\u8bed"]}),(0,i.jsx)("li",{children:"\u2022 \u914d\u7f6e\u4fee\u6539\u540e\u9700\u8981\u70b9\u51fb\u201c\u4fdd\u5b58\u914d\u7f6e\u201d\u6309\u94ae\u624d\u80fd\u751f\u6548"}),(0,i.jsx)("li",{children:"\u2022 \u5efa\u8bae\u5b9a\u671f\u66f4\u65b0\u7b80\u5386\u5185\u5bb9\u4ee5\u83b7\u5f97\u66f4\u597d\u7684\u5339\u914d\u6548\u679c"})]})]})]})]})}}}]);