"use strict";(self.webpackChunkzhitoujianli_website=self.webpackChunkzhitoujianli_website||[]).push([[925],{8925:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var o=s(8878),r=s(5055),a=s(1477),n=s(782);const l=()=>{const[e,t]=(0,o.useState)(""),[s,l]=(0,o.useState)(""),[i,c]=(0,o.useState)(""),[d,u]=(0,o.useState)(!1),[m,x]=(0,o.useState)(""),[h,b]=(0,o.useState)(""),[f,g]=(0,o.useState)(""),[p,y]=(0,o.useState)(0),[v,w]=(0,o.useState)(!1),[j,N]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(p>0){const e=setTimeout(()=>y(p-1),1e3);return()=>clearTimeout(e)}},[p]);return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 py-12 px-4",children:(0,n.jsxs)("div",{className:"w-full max-w-md",children:[(0,n.jsxs)("div",{className:"text-center mb-10 animate-fade-in",children:[(0,n.jsx)("a",{href:"/",className:"inline-block group",children:(0,n.jsx)("img",{src:"/images/logo.png",alt:"\u667a\u6295\u7b80\u5386",className:"h-16 w-auto mx-auto mb-4 transition-transform duration-200 group-hover:scale-105"})}),(0,n.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2 font-inter",children:"\u667a\u6295\u7b80\u5386"}),(0,n.jsx)("p",{className:"text-gray-600 text-lg font-medium",children:"\u521b\u5efa\u8d26\u53f7\uff0c\u5f00\u542f\u667a\u80fd\u6c42\u804c\u4e4b\u65c5"})]}),(0,n.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-8",children:[(0,n.jsx)("div",{className:"text-center mb-8",children:(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900 font-inter",children:"\u6ce8\u518c\u65b0\u8d26\u53f7"})}),m&&(0,n.jsx)("div",{className:"mb-6 p-4 bg-red-50/80 backdrop-blur-sm border border-red-200/50 rounded-xl text-red-700 text-sm font-medium",children:m}),h&&(0,n.jsx)("div",{className:"mb-6 p-4 bg-green-50/80 backdrop-blur-sm border border-green-200/50 rounded-xl text-green-700 text-sm font-medium",children:h}),(0,n.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),x(""),b(""),s===i)if(s.length<6)x("\u5bc6\u7801\u957f\u5ea6\u81f3\u5c116\u4f4d");else if(f)if(v)if(j){u(!0);try{const t=await a.y.register(e,s);t.success?(b("\u6ce8\u518c\u6210\u529f\uff013\u79d2\u540e\u8df3\u8f6c\u5230\u767b\u5f55\u9875..."),setTimeout(()=>{window.location.href="/login"},3e3)):x(t.message||"\u6ce8\u518c\u5931\u8d25")}catch(n){var o,r;const e=(null===(o=n.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.message)||"\u6ce8\u518c\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5";x(e)}finally{u(!1)}}else x("\u8bf7\u5148\u9a8c\u8bc1\u90ae\u7bb1\u9a8c\u8bc1\u7801");else x("\u8bf7\u5148\u53d1\u9001\u9a8c\u8bc1\u7801");else x("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801");else x("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4")},className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-3 font-inter",children:["\u90ae\u7bb1\u5730\u5740 ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)("input",{id:"email",type:"email",required:!0,value:e,onChange:e=>t(e.target.value),className:"flex-1 px-4 py-4 bg-white/60 backdrop-blur-sm border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-400 transition-all duration-300 text-base font-inter placeholder-gray-400 hover:bg-white/80",placeholder:"your@email.com"}),(0,n.jsx)("button",{type:"button",onClick:async()=>{if(e)if(e.match(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/))try{u(!0),x("");const t=r.Ay.apiBaseUrl||"/api",s="".concat(t,"/auth/send-verification-code");console.log("\ud83d\udd17 \u53d1\u9001\u9a8c\u8bc1\u7801\u8bf7\u6c42\u5230:",s),console.log("\ud83d\udd27 \u5f53\u524d\u73af\u5883:",{hostname:window.location.hostname,protocol:window.location.protocol,apiBaseUrl:r.Ay.apiBaseUrl,fullUrl:s,environment:r.Ay.isProduction?"production":"development"});const o=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e}),credentials:"include"});if(console.log("\ud83d\udcca \u54cd\u5e94\u72b6\u6001:",{status:o.status,statusText:o.statusText,headers:Object.fromEntries(o.headers.entries())}),!o.ok){const e=await o.text();throw console.error("\u274c \u8bf7\u6c42\u5931\u8d25:",e),new Error("HTTP ".concat(o.status,": ").concat(e||o.statusText))}const a=await o.json();a.success?(b("\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001\u5230\u90ae\u7bb1\uff0c\u8bf7\u67e5\u770b\u90ae\u4ef6"),w(!0),y(60),N(!1),g(""),console.log("\u2705 \u9a8c\u8bc1\u7801\u53d1\u9001\u6210\u529f\uff0c\u72b6\u6001\u5df2\u91cd\u7f6e")):x(a.message||"\u53d1\u9001\u9a8c\u8bc1\u7801\u5931\u8d25")}catch(t){console.error("\u53d1\u9001\u9a8c\u8bc1\u7801\u5931\u8d25:",t),console.error("\u9519\u8bef\u8be6\u60c5:",t),"TypeError"===t.name&&t.message.includes("Failed to fetch")?x("\u7f51\u7edc\u8fde\u63a5\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u6216\u7a0d\u540e\u91cd\u8bd5"):"TypeError"===t.name&&t.message.includes("Mixed Content")?x("\u5b89\u5168\u9519\u8bef\uff1a\u8bf7\u4f7f\u7528 HTTPS \u8bbf\u95ee"):t.message.includes("HTTP")?x("\u670d\u52a1\u5668\u9519\u8bef\uff1a".concat(t.message)):x("\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")}finally{u(!1)}else x("\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e");else x("\u8bf7\u5148\u8f93\u5165\u90ae\u7bb1\u5730\u5740")},disabled:d||p>0,className:"px-6 py-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.02] transform transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500/50 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none font-inter text-sm whitespace-nowrap",children:p>0?"".concat(p,"s"):"\u53d1\u9001\u9a8c\u8bc1\u7801"})]})]}),v&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{htmlFor:"verificationCode",className:"block text-sm font-semibold text-gray-700 mb-3 font-inter",children:["\u90ae\u7bb1\u9a8c\u8bc1\u7801 ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)("input",{id:"verificationCode",type:"text",required:!0,value:f,onChange:e=>g(e.target.value),className:"flex-1 px-4 py-4 bg-white/60 backdrop-blur-sm border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-400 transition-all duration-300 text-base font-inter placeholder-gray-400 hover:bg-white/80 disabled:bg-gray-100/60",placeholder:"\u8bf7\u8f93\u51656\u4f4d\u9a8c\u8bc1\u7801",maxLength:6,disabled:j}),(0,n.jsx)("button",{type:"button",onClick:async()=>{if(e&&f)try{u(!0),x(""),console.log("\ud83d\udd0d \u8c03\u8bd5\u4fe1\u606f - \u5f53\u524d\u72b6\u6001\u503c:"),console.log("  email:",e),console.log("  verificationCode:",f),console.log("  codeSent:",v),console.log("  emailVerified:",j);const t=r.Ay.apiBaseUrl||"/api",s="".concat(t,"/auth/verify-code"),o=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:f}),credentials:"include"}),a=await o.json();a.success?(N(!0),b("\u90ae\u7bb1\u9a8c\u8bc1\u6210\u529f")):x(a.message||"\u9a8c\u8bc1\u7801\u9a8c\u8bc1\u5931\u8d25")}catch(a){var t,s,o;console.error("\u9a8c\u8bc1\u90ae\u7bb1\u9a8c\u8bc1\u7801\u5931\u8d25:",a),console.error("\u9519\u8bef\u8be6\u60c5:",null===(t=a.response)||void 0===t?void 0:t.data),null!==(s=a.response)&&void 0!==s&&null!==(o=s.data)&&void 0!==o&&o.message?x(a.response.data.message):x("\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")}finally{u(!1)}else x("\u8bf7\u5148\u8f93\u5165\u90ae\u7bb1\u548c\u9a8c\u8bc1\u7801")},disabled:!f||d||j,className:"px-6 py-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.02] transform transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-green-500/50 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none font-inter text-sm whitespace-nowrap",children:j?"\u5df2\u9a8c\u8bc1":"\u9a8c\u8bc1"})]}),(0,n.jsxs)("p",{className:"mt-2 text-sm text-gray-600 font-inter",children:["\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001\u5230 ",e,"\uff0c\u8bf7\u57285\u5206\u949f\u5185\u8f93\u5165"]}),j&&(0,n.jsx)("p",{className:"mt-2 text-sm text-green-600 font-medium",children:"\u2713 \u90ae\u7bb1\u9a8c\u8bc1\u6210\u529f\uff0c\u53ef\u4ee5\u7ee7\u7eed\u6ce8\u518c"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-3 font-inter",children:["\u5bc6\u7801 ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsx)("input",{id:"password",type:"password",required:!0,value:s,onChange:e=>l(e.target.value),className:"w-full px-4 py-4 bg-white/60 backdrop-blur-sm border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-400 transition-all duration-300 text-base font-inter placeholder-gray-400 hover:bg-white/80",placeholder:"\u81f3\u5c116\u4f4d",minLength:6})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{htmlFor:"confirmPassword",className:"block text-sm font-semibold text-gray-700 mb-3 font-inter",children:["\u786e\u8ba4\u5bc6\u7801 ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsx)("input",{id:"confirmPassword",type:"password",required:!0,value:i,onChange:e=>c(e.target.value),className:"w-full px-4 py-4 bg-white/60 backdrop-blur-sm border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-400 transition-all duration-300 text-base font-inter placeholder-gray-400 hover:bg-white/80",placeholder:"\u518d\u6b21\u8f93\u5165\u5bc6\u7801",minLength:6})]}),(0,n.jsx)("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-semibold py-4 px-6 rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.02] transform transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500/50 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none font-inter text-lg",children:d?(0,n.jsxs)("div",{className:"flex items-center justify-center",children:[(0,n.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"\u6ce8\u518c\u4e2d..."]}):"\u6ce8\u518c"})]}),(0,n.jsxs)("div",{className:"mt-8 text-center",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600 font-inter",children:"\u5df2\u6709\u8d26\u53f7\uff1f"}),(0,n.jsx)("a",{href:"/login",className:"ml-1 text-sm font-medium text-blue-600 hover:text-blue-700 hover:underline transition-all duration-200 font-inter",children:"\u7acb\u5373\u767b\u5f55"})]})]}),(0,n.jsxs)("div",{className:"text-center text-xs text-gray-500 mt-8 font-inter",children:[(0,n.jsx)("p",{className:"mb-2",children:"\u6ce8\u518c\u5373\u8868\u793a\u540c\u610f"}),(0,n.jsxs)("div",{className:"space-x-1",children:[(0,n.jsx)("a",{href:"/terms",className:"text-blue-600 hover:text-blue-700 hover:underline transition-colors duration-200",children:"\u7528\u6237\u534f\u8bae"}),(0,n.jsx)("span",{children:"\u548c"}),(0,n.jsx)("a",{href:"/privacy",className:"text-blue-600 hover:text-blue-700 hover:underline transition-colors duration-200",children:"\u9690\u79c1\u653f\u7b56"})]})]})]})})}}}]);