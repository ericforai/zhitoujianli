[0;34mℹ️  检查服务状态...[0m
[0;32m✅ 后端服务正常运行[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #1: 服务健康检查[0m
[0;34mℹ️  ==========================================[0m
[0;32m✅ Status API响应正常[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #2: 认证服务健康检查[0m
[0;34mℹ️  ==========================================[0m
[0;32m✅ 字段 success = true[0m
[0;32m✅ 字段 authMethod = Spring Security[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #3: 注册用户A: test_user_a_1762092160@test.com[0m
[0;34mℹ️  ==========================================[0m
[0;32m✅ 字段 success = true[0m
[0;32m✅ 用户A注册成功，ID: 15[0m
[0;34mℹ️  Token A (前20字符): eyJhbGciOiJIUzI1NiJ9...[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #4: 注册用户B: test_user_b_1762092160@test.com[0m
[0;34mℹ️  ==========================================[0m
[0;32m✅ 字段 success = true[0m
[0;32m✅ 用户B注册成功，ID: 16[0m
[0;34mℹ️  Token B (前20字符): eyJhbGciOiJIUzI1NiJ9...[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #5: 用户A保存Boss Cookie[0m
[0;34mℹ️  ==========================================[0m
[0;32m✅ 字段 success = true[0m
[0;32m✅ 用户A Cookie保存成功[0m
[0;34mℹ️  Cookie路径: src/main/java/boss/cookie.json[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #6: 用户B保存Boss Cookie[0m
[0;34mℹ️  ==========================================[0m
[0;32m✅ 字段 success = true[0m
[0;32m✅ 用户B Cookie保存成功[0m
[0;34mℹ️  Cookie路径: src/main/java/boss/cookie.json[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #7: 验证Cookie文件物理隔离[0m
[0;34mℹ️  ==========================================[0m
[0;34mℹ️  检查用户A的Cookie文件...[0m
[0;31m❌ 用户A Cookie文件不存在[0m
[0;34mℹ️  检查用户B的Cookie文件...[0m
[0;31m❌ 用户B Cookie文件不存在[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #8: 验证Cookie未被覆盖（核心测试）[0m
[0;34mℹ️  ==========================================[0m
[0;34mℹ️  重新读取用户A的Cookie，验证未被用户B覆盖...[0m
[0;31m❌ 用户A的Cookie文件消失！[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #9: 用户A读取自己的Cookie[0m
[0;34mℹ️  ==========================================[0m
[0;32m✅ 字段 has_cookie = true[0m
[0;31m❌ 用户A读取到了错误的Cookie内容[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #10: 用户B读取自己的Cookie[0m
[0;34mℹ️  ==========================================[0m
[0;32m✅ 字段 has_cookie = true[0m
[0;32m✅ 用户B正确读取到自己的Cookie[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #11: 未登录访问简历上传API[0m
[0;34mℹ️  ==========================================[0m
[0;34mℹ️  HTTP状态码: 302[0m
[1;33m⚠️  未登录访问返回状态码: 302（预期401/403）[0m
[1;33m⚠️  说明: 部分API可能在JWT白名单中（P1任务修复）[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #12: 使用错误Token访问API[0m
[0;34mℹ️  ==========================================[0m
[1;33m⚠️  错误Token访问返回: 200[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #13: 用户A获取当前用户信息[0m
[0;34mℹ️  ==========================================[0m
[0;31m❌ 字段 success 不匹配。预期: true, 实际: false[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #14: 用户B获取当前用户信息[0m
[0;34mℹ️  ==========================================[0m
[0;31m❌ 字段 success 不匹配。预期: true, 实际: false[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #15: 验证用户数据目录隔离[0m
[0;34mℹ️  ==========================================[0m
[1;33m⚠️  用户A数据目录不存在（可能尚未创建）[0m
[1;33m⚠️  用户B数据目录不存在（可能尚未创建）[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #16: 用户A删除自己的Cookie[0m
[0;34mℹ️  ==========================================[0m
[0;32m✅ 字段 success = true[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #17: 验证用户A Cookie已删除[0m
[0;34mℹ️  ==========================================[0m
[0;32m✅ 字段 has_cookie = false[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #18: 验证用户B的Cookie仍然存在（未被误删）[0m
[0;34mℹ️  ==========================================[0m
[0;31m❌ 字段 has_cookie 不匹配。预期: true, 实际: false[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #19: 用户A重新保存Cookie[0m
[0;34mℹ️  ==========================================[0m
[0;32m✅ 字段 success = true[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #20: 用户A尝试访问用户B的Cookie（应该失败）[0m
[0;34mℹ️  ==========================================[0m
[0;34mℹ️  说明: 由于后端基于Token自动识别用户，用户A无法访问用户B的数据[0m
[0;32m✅ ✨ 安全验证通过：用户A只能看到自己的Cookie[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #21: 检查BossExecutionService是否传递userId[0m
[0;34mℹ️  ==========================================[0m
[0;34mℹ️  检查编译后的代码...[0m
[1;33m⚠️  无法验证字节码（javap不可用）[0m
[1;33m⚠️  无法验证字节码（javap不可用）[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #22: 验证Boss.java Cookie路径逻辑[0m
[0;34mℹ️  ==========================================[0m
[0;32m✅ Boss.java使用user_data目录存储Cookie[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #23: 检查用户数据目录结构[0m
[0;34mℹ️  ==========================================[0m
[0;34mℹ️  用户数据目录列表:[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #24: 验证不存在共享的cookie.json[0m
[0;34mℹ️  ==========================================[0m
[0;32m✅ ✨ 未发现共享cookie.json，隔离机制正确[0m
[0;32m✅ ✨ 未发现共享cookie.json[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #25: 用户A再次登录（验证认证功能）[0m
[0;34mℹ️  ==========================================[0m
[0;32m✅ 字段 success = true[0m
[0;32m✅ 登录功能正常[0m

[0;34mℹ️  ==========================================[0m
[0;34mℹ️  测试 #26: 验证Token刷新后能访问API[0m
[0;34mℹ️  ==========================================[0m
[0;31m❌ 字段 success 不匹配。预期: true, 实际: false[0m
