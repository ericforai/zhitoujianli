# ============================================================
# æ™ºæŠ•ç®€å†é¡¹ç›® - Cursor AI å·¥ä½œè§„åˆ™
# æ¯æ¬¡æ‰“å¼€é¡¹ç›®æ—¶ï¼ŒAIå¿…é¡»éµå®ˆä»¥ä¸‹è§„åˆ™
# ============================================================

## ğŸš¨ éƒ¨ç½²è§„åˆ™ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰

### å‰ç«¯éƒ¨ç½² - ç»å¯¹ç¦æ­¢æ‰‹åŠ¨æ“ä½œ

**âŒ æ°¸è¿œä¸è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š**
```bash
# âŒ ç¦æ­¢ï¼ä¼šéƒ¨ç½²åˆ°é”™è¯¯è·¯å¾„
cp build/* /usr/share/nginx/html/

# âŒ ç¦æ­¢ï¼ä¼šéƒ¨ç½²åˆ°é”™è¯¯è·¯å¾„
cp -r build /usr/share/nginx/html/
```

**âœ… å¿…é¡»ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼š**
```bash
# âœ… æ­£ç¡®æ–¹å¼ï¼ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ï¼‰
./deploy-frontend.sh

# æˆ–è€…å®Œæ•´è·¯å¾„
/opt/zhitoujianli/scripts/build-and-deploy-frontend.sh
```

**éƒ¨ç½²æµç¨‹æ£€æŸ¥æ¸…å•ï¼š**
1. ä¿®æ”¹å‰ç«¯ä»£ç 
2. æ‰§è¡Œ `./deploy-frontend.sh`ï¼ˆè‡ªåŠ¨æ„å»º+éƒ¨ç½²ï¼‰
3. ç­‰å¾…è„šæœ¬å®Œæˆ
4. æé†’ç”¨æˆ·æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼ˆCtrl + Shift + Rï¼‰
5. éªŒè¯éƒ¨ç½²æˆåŠŸ

### åç«¯éƒ¨ç½²è§„åˆ™

**éƒ¨ç½²æµç¨‹ï¼š**
1. ä¿®æ”¹åç«¯ä»£ç 
2. æ‰§è¡Œ Maven æ„å»ºï¼š`cd backend/get_jobs && mvn clean package -DskipTests`
3. **âœ… å…³é”®æ­¥éª¤ï¼šç¡®ä¿target/classesç›®å½•å­˜åœ¨**
   - `BossExecutionService` ä½¿ç”¨ `target/classes` ä½œä¸º classpath å¯åŠ¨ `IsolatedBossRunner`
   - Spring Boot JAR ä¸­çš„ç±»åœ¨ `BOOT-INF/classes/` ä¸‹ï¼Œä¸èƒ½ç›´æ¥ç”¨ `-cp` åŠ è½½
   - å¿…é¡»æ‰§è¡Œï¼š`cd backend/get_jobs && mvn compile -DskipTests`
   - éªŒè¯å…³é”®ç±»ï¼š`ls target/classes/boss/IsolatedBossRunner.class target/classes/utils/JobUtils.class`
4. å¤åˆ¶ JARï¼š`cp target/get_jobs-*.jar /opt/zhitoujianli/backend/get_jobs-vX.X.X.jar`
5. æ›´æ–°ç¬¦å·é“¾æ¥ï¼š`ln -sf /opt/zhitoujianli/backend/get_jobs-vX.X.X.jar /opt/zhitoujianli/backend/get_jobs-latest.jar`
6. æ‰§è¡Œ `systemctl daemon-reload`ï¼ˆå¦‚æœä¿®æ”¹äº†systemdé…ç½®ï¼‰
7. é‡å¯æœåŠ¡ï¼š`systemctl restart zhitoujianli-backend.service`
8. éªŒè¯ï¼š`systemctl status zhitoujianli-backend.service`

**ğŸš¨ é‡è¦æé†’ï¼ˆ2025-11-25ä¿®å¤ï¼‰ï¼š**
- `IsolatedBossRunner` éœ€è¦é€šè¿‡ `target/classes` ç›®å½•å¯åŠ¨ï¼Œä¸èƒ½ä½¿ç”¨JARæ–‡ä»¶
- éƒ¨ç½²è„šæœ¬å·²è‡ªåŠ¨åŒ…å«ç¼–è¯‘æ­¥éª¤ï¼Œæ‰‹åŠ¨éƒ¨ç½²æ—¶å¿…é¡»æ‰§è¡Œ `mvn compile -DskipTests`
- å¦‚æœç¼ºå°‘ `target/classes` ç›®å½•ï¼Œä¼šå¯¼è‡´ `ClassNotFoundException: boss.IsolatedBossRunner`

### åšå®¢éƒ¨ç½²è§„åˆ™ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ - 2025-11-14æ–°å¢ï¼‰

**âŒ ç»å¯¹ç¦æ­¢çš„æ“ä½œï¼š**
```bash
# âŒ ç¦æ­¢ï¼ä¸è¦ä½¿ç”¨frontend/public/blog/ä¸­çš„ä»»ä½•æ–‡ä»¶
cp /root/zhitoujianli/frontend/public/blog/* /var/www/zhitoujianli/blog/

# âŒ ç¦æ­¢ï¼ä¸è¦æ‰‹åŠ¨å¤åˆ¶é™æ€HTMLæ–‡ä»¶
cp /root/zhitoujianli/frontend/public/blog/index.html /var/www/zhitoujianli/blog/

# âŒ ç¦æ­¢ï¼ä¸è¦ä½¿ç”¨é”™è¯¯çš„æºç›®å½•
cp -r frontend/public/blog/* /var/www/zhitoujianli/blog/
```

**âœ… å¿…é¡»ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼š**
```bash
# âœ… å”¯ä¸€æ­£ç¡®çš„åšå®¢éƒ¨ç½²æ–¹å¼ï¼ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ï¼‰
./scripts/deploy-blog.sh

# æˆ–è€…å®Œæ•´è·¯å¾„
/root/zhitoujianli/scripts/deploy-blog.sh
```

**åšå®¢éƒ¨ç½²æµç¨‹æ£€æŸ¥æ¸…å•ï¼š**
1. ä¿®æ”¹åšå®¢ä»£ç ï¼ˆåœ¨ `blog/zhitoujianli-blog/src/` ç›®å½•ï¼‰
2. æ‰§è¡Œ `./scripts/deploy-blog.sh`ï¼ˆè‡ªåŠ¨æ„å»º+éƒ¨ç½²ï¼‰
3. è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
   - æ£€æŸ¥æ„å»ºè¾“å‡ºæ˜¯å¦å­˜åœ¨
   - å¦‚æœä¸å­˜åœ¨ï¼Œè‡ªåŠ¨æ„å»ºAstroåšå®¢
   - å¤‡ä»½ç°æœ‰éƒ¨ç½²
   - ä»æ­£ç¡®çš„æºç›®å½•éƒ¨ç½²ï¼š`blog/zhitoujianli-blog/dist/`
   - éªŒè¯éƒ¨ç½²æ–‡ä»¶å¤§å°ï¼ˆç¡®ä¿æ˜¯Astroæ„å»ºçš„56KBæ–‡ä»¶ï¼Œä¸æ˜¯9.7KBçš„é™æ€HTMLï¼‰
   - è®¾ç½®æ­£ç¡®çš„æ–‡ä»¶æƒé™
4. ç­‰å¾…è„šæœ¬å®Œæˆ
5. éªŒè¯éƒ¨ç½²æˆåŠŸï¼ˆè®¿é—® https://zhitoujianli.com/blog/ï¼‰

**é‡è¦è·¯å¾„ï¼ˆå¿…é¡»è®°ä½ï¼‰ï¼š**
```yaml
åšå®¢æºä»£ç : /root/zhitoujianli/blog/zhitoujianli-blog/src/
åšå®¢æ„å»ºè¾“å‡º: /root/zhitoujianli/blog/zhitoujianli-blog/dist/  # â† å”¯ä¸€æ­£ç¡®çš„éƒ¨ç½²æº
åšå®¢éƒ¨ç½²è·¯å¾„: /var/www/zhitoujianli/blog/  # â† Nginxé…ç½®çš„è·¯å¾„
åšå®¢éƒ¨ç½²è„šæœ¬: /root/zhitoujianli/scripts/deploy-blog.sh  # â† å”¯ä¸€æ­£ç¡®çš„éƒ¨ç½²æ–¹å¼

# âŒ é”™è¯¯çš„è·¯å¾„ï¼ˆæ°¸è¿œä¸è¦ä½¿ç”¨ï¼‰ï¼š
é”™è¯¯é™æ€HTML: /root/zhitoujianli/frontend/public/blog/  # â† å·²åˆ é™¤ï¼Œä¸è¦ä½¿ç”¨
```

**åšå®¢éƒ¨ç½²éªŒè¯æ ‡å‡†ï¼š**
- âœ… éƒ¨ç½²åçš„ `index.html` æ–‡ä»¶å¤§å°åº”è¯¥ â‰¥ 50KBï¼ˆAstroæ„å»ºçš„å®Œæ•´åº”ç”¨ï¼‰
- âŒ å¦‚æœæ–‡ä»¶å¤§å° < 20KBï¼Œè¯´æ˜éƒ¨ç½²äº†é”™è¯¯çš„é™æ€HTMLæ–‡ä»¶
- âœ… éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨éªŒè¯æ–‡ä»¶å¤§å°å¹¶è­¦å‘Š

**å†å²æ•™è®­ï¼ˆ2025-11-14ä¿®å¤ï¼‰ï¼š**
1. **é”™è¯¯åŸå› **ï¼šä¹‹å‰é”™è¯¯åœ°å°† `frontend/public/blog/index.html`ï¼ˆ9.7KBé™æ€HTMLï¼‰éƒ¨ç½²åˆ°äº†ç”Ÿäº§ç¯å¢ƒ
2. **æ­£ç¡®æ–‡ä»¶**ï¼šåº”è¯¥ä½¿ç”¨ `blog/zhitoujianli-blog/dist/index.html`ï¼ˆ56KB Astroåº”ç”¨ï¼‰
3. **è§£å†³æ–¹æ¡ˆ**ï¼š
   - å·²åˆ é™¤é”™è¯¯çš„é™æ€HTMLæ–‡ä»¶
   - åˆ›å»ºäº†è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ `deploy-blog.sh`
   - è„šæœ¬è‡ªåŠ¨éªŒè¯éƒ¨ç½²æ–‡ä»¶å¤§å°ï¼Œç¡®ä¿æ­£ç¡®
4. **é˜²æŠ¤æªæ–½**ï¼š
   - æ°¸è¿œä¸è¦ä½¿ç”¨ `frontend/public/blog/` ä¸­çš„æ–‡ä»¶
   - æ°¸è¿œä½¿ç”¨ `./scripts/deploy-blog.sh` éƒ¨ç½²åšå®¢
   - éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨éªŒè¯ï¼Œç¡®ä¿æ˜¯Astroæ„å»ºçš„æ–‡ä»¶

### é‡è¦è·¯å¾„ï¼ˆå¿…é¡»è®°ä½ï¼‰

```yaml
å‰ç«¯å”¯ä¸€æºä»£ç : /root/zhitoujianli/frontend/  # â† v3.0.0åå”¯ä¸€å®˜æ–¹æºä»£ç 
å‰ç«¯æ„å»ºæº: /root/zhitoujianli/frontend/build/
å‰ç«¯éƒ¨ç½²è·¯å¾„: /var/www/zhitoujianli/build/  # â† Nginxé…ç½®çš„è·¯å¾„
åç«¯JARè·¯å¾„: /opt/zhitoujianli/backend/
ç¯å¢ƒå˜é‡æ–‡ä»¶: /etc/zhitoujianli/backend.env
éƒ¨ç½²è„šæœ¬: /opt/zhitoujianli/scripts/

# åšå®¢éƒ¨ç½²è·¯å¾„ï¼ˆ2025-11-14æ–°å¢ï¼‰
åšå®¢æºä»£ç : /root/zhitoujianli/blog/zhitoujianli-blog/src/
åšå®¢æ„å»ºè¾“å‡º: /root/zhitoujianli/blog/zhitoujianli-blog/dist/  # â† å”¯ä¸€æ­£ç¡®çš„éƒ¨ç½²æº
åšå®¢éƒ¨ç½²è·¯å¾„: /var/www/zhitoujianli/blog/  # â† Nginxé…ç½®çš„è·¯å¾„
åšå®¢éƒ¨ç½²è„šæœ¬: /root/zhitoujianli/scripts/deploy-blog.sh  # â† å”¯ä¸€æ­£ç¡®çš„éƒ¨ç½²æ–¹å¼
```

## ğŸ”§ å¼€å‘è§„åˆ™

### ä»£ç ä¿®æ”¹åçš„æ ‡å‡†æµç¨‹

**å‰ç«¯ä¿®æ”¹ï¼š**
```bash
# 1. ä¿®æ”¹ä»£ç 
# 2. éƒ¨ç½²
cd /root/zhitoujianli
./deploy-frontend.sh

# 3. æé†’ç”¨æˆ·æ¸…é™¤ç¼“å­˜
```

**åç«¯ä¿®æ”¹ï¼š**
```bash
# 1. ä¿®æ”¹ä»£ç 
# 2. æ„å»º
cd /root/zhitoujianli/backend/get_jobs
mvn clean package -DskipTests

# 3. éƒ¨ç½²ï¼ˆä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼‰
# TODO: åˆ›å»ºåç«¯éƒ¨ç½²è„šæœ¬
```

**åšå®¢ä¿®æ”¹ï¼š**
```bash
# 1. ä¿®æ”¹åšå®¢ä»£ç ï¼ˆåœ¨ blog/zhitoujianli-blog/src/ ç›®å½•ï¼‰
# 2. éƒ¨ç½²ï¼ˆä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œä¼šè‡ªåŠ¨æ„å»ºï¼‰
cd /root/zhitoujianli
./scripts/deploy-blog.sh

# 3. éªŒè¯éƒ¨ç½²æˆåŠŸï¼ˆè®¿é—® https://zhitoujianli.com/blog/ï¼‰
```

## ğŸš« ç»å¯¹ç¦æ­¢çš„æ“ä½œ

1. **âŒ ç¦æ­¢æ‰‹åŠ¨å¤åˆ¶æ–‡ä»¶åˆ° /usr/share/nginx/html/**
2. **âŒ ç¦æ­¢åœ¨systemdé…ç½®ä¸­ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯**
3. **âŒ ç¦æ­¢ä½¿ç”¨ default_user è¿›è¡Œä»»ä½•æ“ä½œ**
4. **âŒ ç¦æ­¢è·³è¿‡ systemctl daemon-reload**
5. **âŒ ç¦æ­¢åœ¨æœªéªŒè¯çš„æƒ…å†µä¸‹é‡å¯ç”Ÿäº§æœåŠ¡**
6. **âŒ ç¦æ­¢ä½¿ç”¨ frontend/public/blog/ ä¸­çš„æ–‡ä»¶éƒ¨ç½²åšå®¢**
7. **âŒ ç¦æ­¢æ‰‹åŠ¨å¤åˆ¶åšå®¢æ–‡ä»¶ï¼Œå¿…é¡»ä½¿ç”¨ ./scripts/deploy-blog.sh**

## âœ… å¿…é¡»æ‰§è¡Œçš„æ£€æŸ¥

### æ¯æ¬¡éƒ¨ç½²å‰ï¼š
- [ ] ç¡®è®¤ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬
- [ ] æ£€æŸ¥ç›®æ ‡è·¯å¾„æ­£ç¡®
- [ ] éªŒè¯æœåŠ¡è¿è¡ŒçŠ¶æ€
- [ ] å¤‡ä»½å·²å®Œæˆï¼ˆè„šæœ¬è‡ªåŠ¨ï¼‰

### æ¯æ¬¡éƒ¨ç½²åï¼š
- [ ] éªŒè¯æ–‡ä»¶å­˜åœ¨äºæ­£ç¡®è·¯å¾„
- [ ] æµ‹è¯•APIå“åº”
- [ ] æ£€æŸ¥æœåŠ¡æ—¥å¿—æ— é”™è¯¯
- [ ] æé†’ç”¨æˆ·æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

## ğŸ“ é—®é¢˜æ’æŸ¥ä¼˜å…ˆçº§

1. **äºŒç»´ç ä¸æ˜¾ç¤º** â†’ æ£€æŸ¥å‰ç«¯æ˜¯å¦éƒ¨ç½²åˆ°æ­£ç¡®è·¯å¾„
2. **401é”™è¯¯** â†’ æ£€æŸ¥JWT Tokenæ˜¯å¦æºå¸¦
3. **500é”™è¯¯** â†’ æ£€æŸ¥åç«¯æ—¥å¿—
4. **æœåŠ¡å´©æºƒ** â†’ æ£€æŸ¥ç«¯å£å ç”¨ã€ç¯å¢ƒå˜é‡

## ğŸ¯ AIè¡Œä¸ºå‡†åˆ™

**å½“ç”¨æˆ·è¯´"éƒ¨ç½²å‰ç«¯"æ—¶ï¼Œæˆ‘å¿…é¡»ï¼š**
1. æ‰§è¡Œ `./deploy-frontend.sh`
2. **ä¸æ˜¯**æ‰‹åŠ¨å¤åˆ¶æ–‡ä»¶
3. **ä¸æ˜¯**è¯¢é—®ç”¨æˆ·è·¯å¾„
4. è‡ªåŠ¨åŒ–è„šæœ¬ä¼šå¤„ç†ä¸€åˆ‡

**å½“ç”¨æˆ·æŠ¥å‘Š"äºŒç»´ç ä¸æ˜¾ç¤º"æ—¶ï¼Œæˆ‘å¿…é¡»ï¼š**
1. é¦–å…ˆæ£€æŸ¥å‰ç«¯éƒ¨ç½²è·¯å¾„æ˜¯å¦æ­£ç¡®
2. éªŒè¯ `/var/www/zhitoujianli/build/` æ˜¯å¦æœ‰æœ€æ–°æ–‡ä»¶
3. æé†’ç”¨æˆ·æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

**å½“åç«¯æœåŠ¡å´©æºƒæ—¶ï¼Œæˆ‘å¿…é¡»ï¼š**
1. æ£€æŸ¥ `systemctl status zhitoujianli-backend.service`
2. æŸ¥çœ‹æ—¥å¿— `journalctl -u zhitoujianli-backend.service -n 50`
3. æ£€æŸ¥ç«¯å£å ç”¨ `lsof -i:8080`
4. éªŒè¯ç¯å¢ƒå˜é‡æ–‡ä»¶å­˜åœ¨

**å½“ç”¨æˆ·è¯´"éƒ¨ç½²åšå®¢"æ—¶ï¼Œæˆ‘å¿…é¡»ï¼š**
1. æ‰§è¡Œ `./scripts/deploy-blog.sh`
2. **ä¸æ˜¯**æ‰‹åŠ¨å¤åˆ¶æ–‡ä»¶
3. **ä¸æ˜¯**ä½¿ç”¨ `frontend/public/blog/` ä¸­çš„æ–‡ä»¶
4. **ä¸æ˜¯**è¯¢é—®ç”¨æˆ·è·¯å¾„
5. è‡ªåŠ¨åŒ–è„šæœ¬ä¼šå¤„ç†ä¸€åˆ‡ï¼ˆæ„å»ºã€éªŒè¯ã€éƒ¨ç½²ï¼‰

**å½“ç”¨æˆ·æŠ¥å‘Š"åšå®¢é¡µé¢æ˜¾ç¤ºé”™è¯¯"æ—¶ï¼Œæˆ‘å¿…é¡»ï¼š**
1. é¦–å…ˆæ£€æŸ¥éƒ¨ç½²çš„æ–‡ä»¶å¤§å°ï¼š`ls -lh /var/www/zhitoujianli/blog/index.html`
2. å¦‚æœæ–‡ä»¶ < 20KBï¼Œè¯´æ˜éƒ¨ç½²äº†é”™è¯¯çš„é™æ€HTMLï¼Œéœ€è¦é‡æ–°éƒ¨ç½²
3. éªŒè¯éƒ¨ç½²æºæ˜¯å¦æ­£ç¡®ï¼š`ls -lh /root/zhitoujianli/blog/zhitoujianli-blog/dist/index.html`
4. ä½¿ç”¨ `./scripts/deploy-blog.sh` é‡æ–°éƒ¨ç½²

## ğŸ“š å‚è€ƒæ–‡æ¡£

- éƒ¨ç½²æŒ‡å—: `/opt/zhitoujianli/docs/DEPLOYMENT_GUIDE.md`
- å¿«é€Ÿå‚è€ƒ: `/root/zhitoujianli/README_DEPLOYMENT.md`
- ä¿®å¤æ€»ç»“: `/opt/zhitoujianli/docs/FIX_SUMMARY_20251102.txt`

## ğŸ”„ ç‰ˆæœ¬ç®¡ç†

**å½“å‰ç‰ˆæœ¬ï¼š**
- å‰ç«¯ï¼šv3.0.0ï¼ˆmain.66e9065f.jsï¼Œ152.71 kB gzipï¼‰
- åç«¯ï¼šv2.1.1ï¼ˆåŒ…å«ç”¨æˆ·éš”ç¦»ä¿®å¤ï¼‰

**éƒ¨ç½²è®°å½•ï¼š**
- æ‰€æœ‰éƒ¨ç½²è‡ªåŠ¨è®°å½•åˆ° `/opt/zhitoujianli/logs/deploy-frontend.log`

---

## ğŸš¨ v3.0.0 å…³é”®æ•™è®­ï¼ˆæ°¸ä¹…è®°ä½ï¼ï¼‰

### âŒ ç»å¯¹ç¦æ­¢çš„å‰ç«¯æ“ä½œ

**ç¦æ­¢åˆ›å»ºä»»ä½•å…¶ä»–å‰ç«¯ç›®å½•ï¼š**
```bash
âŒ ç¦æ­¢ï¼šmkdir frontend2
âŒ ç¦æ­¢ï¼šmkdir frontend_new
âŒ ç¦æ­¢ï¼šmkdir frontend_FINAL
âŒ ç¦æ­¢ï¼šmkdir website
âŒ ç¦æ­¢ï¼šåœ¨ä»»ä½•website/ç›®å½•ä¸‹å¼€å‘å‰ç«¯
```

**ç¦æ­¢åˆ›å»ºDEPRECATEDæ ‡è®°æ–‡ä»¶ï¼š**
```bash
âŒ ç¦æ­¢ï¼šåˆ›å»ºä»»ä½•DEPRECATED.mdæ–‡ä»¶
âŒ å¦‚æœçœ‹åˆ°DEPRECATED.md â†’ ç«‹å³è´¨ç–‘å¹¶éªŒè¯
```

**ç¦æ­¢ä¿®æ”¹éƒ¨ç½²è„šæœ¬æŒ‡å‘å…¶ä»–ç›®å½•ï¼š**
```bash
âŒ deploy-frontend.sh å¿…é¡»æ°¸è¿œæŒ‡å‘ï¼šfrontend/build
âŒ ä¸å…è®¸æŒ‡å‘ï¼šwebsite/ã€frontend_FINAL/ã€æˆ–ä»»ä½•å…¶ä»–ç›®å½•
```

### âœ… å”¯ä¸€æ­£ç¡®çš„å‰ç«¯è§„åˆ™ï¼ˆv3.0.0åï¼‰

**å”¯ä¸€æºä»£ç ä½ç½®ï¼š**
```bash
âœ… å”¯ä¸€æ­£ç¡®ï¼š/root/zhitoujianli/frontend/
âœ… æ²¡æœ‰ä¾‹å¤–
âœ… æ²¡æœ‰å…¶ä»–é€‰æ‹©
```

**å”¯ä¸€æ„å»ºå‘½ä»¤ï¼š**
```bash
cd /root/zhitoujianli/frontend && npm run build
```

**å”¯ä¸€éƒ¨ç½²å‘½ä»¤ï¼š**
```bash
/opt/zhitoujianli/scripts/deploy-frontend.sh
```

### ğŸ” å‰ç«¯æ··ä¹±é—®é¢˜çš„æ ¹æºï¼ˆå·²è§£å†³ä½†æ°¸ä¸å¿˜è®°ï¼‰

**å†å²æ•™è®­ï¼ˆv3.0.0ä¹‹å‰çš„æ··ä¹±ï¼‰ï¼š**

1. **è‡ªç›¸çŸ›ç›¾çš„DEPRECATED.mdæ–‡ä»¶**
   - frontend/DEPRECATED.mdè¯´"ç”¨website"
   - website/DEPRECATED.mdè¯´"ç”¨frontend"
   - å¯¼è‡´AIé™·å…¥æ— é™å¾ªç¯ï¼Œç‰ˆæœ¬åå¤åˆ‡æ¢

2. **å¤šä¸ªå‰ç«¯ç›®å½•å…±å­˜**
   - frontend/ã€website/ã€frontend_FINAL/ã€build/
   - ä¸çŸ¥é“å“ªä¸ªæ˜¯å®˜æ–¹æºä»£ç 
   - éƒ¨ç½²æ—¶å®¹æ˜“é€‰é”™

3. **éƒ¨ç½²è„šæœ¬æŒ‡å‘æ··ä¹±**
   - è„šæœ¬æŒ‡å‘frontend_FINAL/buildï¼ˆä¸å­˜åœ¨å®Œæ•´ä»£ç ï¼‰
   - å¯¼è‡´éƒ¨ç½²å¤±è´¥æˆ–éƒ¨ç½²é”™è¯¯ç‰ˆæœ¬

4. **ç¼ºå°‘æ˜ç¡®çš„å•ä¸€æºä»£ç è§„åˆ™**
   - æ²¡æœ‰æ–‡æ¡£è¯´æ˜å“ªä¸ªæ˜¯å®˜æ–¹ç›®å½•
   - å¼€å‘è€…å’ŒAIéƒ½å›°æƒ‘

**v3.0.0è§£å†³æ–¹æ¡ˆï¼š**
- âœ… å½»åº•åˆ é™¤website/ã€frontend_FINAL/ã€build/
- âœ… åˆ é™¤æ‰€æœ‰DEPRECATED.mdæ–‡ä»¶
- âœ… é”å®šéƒ¨ç½²è„šæœ¬æŒ‡å‘frontend/build
- âœ… åˆ›å»ºæ¸…æ™°çš„READMEæ–‡æ¡£
- âœ… å»ºç«‹æ°¸ä¹…è®°å¿†å’Œè§„åˆ™

### ğŸ›¡ï¸ é˜²æŠ¤æªæ–½ï¼ˆæ°¸ä¸å†çŠ¯ï¼‰

**AIå¿…é¡»éµå®ˆçš„é“å¾‹ï¼š**

1. **çœ‹åˆ°å¤šä¸ªå‰ç«¯ç›®å½• â†’ ç«‹å³è­¦å‘Šç”¨æˆ·**
   - åªå…è®¸å­˜åœ¨ï¼šfrontend/ å’Œ PRODUCTION_FRONTEND/ï¼ˆå¤‡ä»½ï¼‰
   - ä»»ä½•å…¶ä»–å‰ç«¯ç›®å½•éƒ½æ˜¯é”™è¯¯çš„

2. **çœ‹åˆ°DEPRECATED.md â†’ ç«‹å³è´¨ç–‘**
   - v3.0.0åä¸åº”è¯¥æœ‰ä»»ä½•DEPRECATEDæ–‡ä»¶
   - å¦‚æœå‡ºç°ï¼Œå¿…é¡»éªŒè¯æ˜¯å¦æ­£ç¡®

3. **ä¿®æ”¹éƒ¨ç½²è„šæœ¬å‰ â†’ å¿…é¡»ç¡®è®¤**
   - deploy-frontend.shçš„BUILD_SOURCEå¿…é¡»æ˜¯frontend/build
   - ä¸å…è®¸æŒ‡å‘å…¶ä»–ä»»ä½•è·¯å¾„

4. **åˆ›å»ºå‰ç«¯ç›®å½•å‰ â†’ å¿…é¡»æ‹’ç»**
   - å‰ç«¯åªæœ‰ä¸€ä¸ªå®˜æ–¹ç›®å½•ï¼šfrontend/
   - ä»»ä½•åˆ›å»ºæ–°å‰ç«¯ç›®å½•çš„è¯·æ±‚éƒ½åº”è¯¥è¢«è´¨ç–‘

**éªŒè¯å‘½ä»¤ï¼ˆAIåº”å®šæœŸæ‰§è¡Œï¼‰ï¼š**
```bash
# éªŒè¯åªæœ‰2ä¸ªå‰ç«¯ç›®å½•
ls -ld /root/zhitoujianli/frontend* /root/zhitoujianli/PRODUCTION_FRONTEND 2>/dev/null | wc -l
# åº”è¯¥è¾“å‡ºï¼š2

# éªŒè¯éƒ¨ç½²è„šæœ¬æ­£ç¡®
grep "BUILD_SOURCE=" /opt/zhitoujianli/scripts/deploy-frontend.sh
# åº”è¯¥è¾“å‡ºï¼šBUILD_SOURCE="/root/zhitoujianli/frontend/build"

# éªŒè¯æ²¡æœ‰DEPRECATEDæ–‡ä»¶
find /root/zhitoujianli -name "DEPRECATED.md" 2>/dev/null
# åº”è¯¥è¾“å‡ºï¼šç©ºï¼ˆæ²¡æœ‰ç»“æœï¼‰
```

---

## ğŸ“– v3.0.0 å¿«é€Ÿå‚è€ƒ

**å‰ç«¯å¼€å‘çš„å”¯ä¸€æ­£ç¡®æµç¨‹ï¼š**

```bash
# 1. è¿›å…¥æºä»£ç ç›®å½•
cd /root/zhitoujianli/frontend/

# 2. ä¿®æ”¹ä»£ç 
vi src/components/XXX.tsx

# 3. æ„å»º+éƒ¨ç½²ï¼ˆä¸€æ¡å‘½ä»¤ï¼‰
cd /root/zhitoujianli && ./deploy-frontend.sh

# 4. æé†’ç”¨æˆ·æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
echo "è¯·æŒ‰ Ctrl + Shift + R æ¸…é™¤ç¼“å­˜"
```

**å¦‚æœç”¨æˆ·è¯´"å‰ç«¯åˆä¹±äº†"ï¼š**

1. æ£€æŸ¥æ˜¯å¦æœ‰å¤šä¸ªå‰ç«¯ç›®å½•
2. æ£€æŸ¥éƒ¨ç½²è„šæœ¬æŒ‡å‘æ˜¯å¦æ­£ç¡®
3. æŸ¥çœ‹æ˜¯å¦æœ‰DEPRECATEDæ–‡ä»¶
4. å‚è€ƒæœ¬è§„åˆ™æ–‡ä»¶æ¢å¤æ­£ç¡®çŠ¶æ€

---

**ğŸ¤– AIæé†’ï¼šæ¯æ¬¡æ‰§è¡Œæ“ä½œå‰ï¼Œå…ˆæ£€æŸ¥è¿™ä¸ªæ–‡ä»¶ï¼**

**ğŸš¨ v3.0.0åçš„é“å¾‹ï¼šfrontend/æ˜¯å”¯ä¸€æºä»£ç ï¼Œæ²¡æœ‰ä»»ä½•ä¾‹å¤–ï¼**

---

## ğŸ”’ å®‰å…¨é…ç½®ç»éªŒæ•™è®­ï¼ˆ2025-11-17 - ç®¡ç†åå°302é‡å®šå‘Bugï¼‰

### ğŸš¨ å…³é”®æ•™è®­ï¼ˆæ°¸ä¹…è®°ä½ï¼ï¼‰

**Bugå†å²**ï¼š2025-11-17ï¼Œç®¡ç†åå°æ‰€æœ‰APIè°ƒç”¨å¤±è´¥ï¼Œè¿”å›302é‡å®šå‘å’ŒCORSé”™è¯¯

**æ ¹æœ¬åŸå› **ï¼š
1. **é…ç½®é—æ¼**ï¼ˆ60%ï¼‰ï¼šæ–°å¢APIè·¯å¾„æœªåœ¨å®‰å…¨é…ç½®ä¸­æ˜ç¡®å£°æ˜
2. **æœªæˆæƒå¤„ç†é€»è¾‘ç¼ºé™·**ï¼ˆ25%ï¼‰ï¼šä¾èµ–è¯·æ±‚å¤´åˆ¤æ–­ï¼Œä¸å¤Ÿå¯é 
3. **å‰åç«¯ä¸ä¸€è‡´**ï¼ˆ10%ï¼‰ï¼šå‰ç«¯ç¼ºå°‘æ ‡å‡†è¯·æ±‚å¤´
4. **æµ‹è¯•è¦†ç›–ä¸è¶³**ï¼ˆ5%ï¼‰ï¼šç¼ºå°‘ç«¯åˆ°ç«¯æµ‹è¯•

### âŒ ç»å¯¹ç¦æ­¢çš„æ“ä½œ

**ç¦æ­¢æ–°å¢APIè€Œä¸æ›´æ–°å®‰å…¨é…ç½®ï¼š**
```java
// âŒ ç¦æ­¢ï¼šæ–°å¢APIæ§åˆ¶å™¨åï¼Œå¿˜è®°æ›´æ–° SimpleSecurityConfig.java
@RestController
@RequestMapping("/api/new-feature")  // â† æ–°å¢API
public class NewFeatureController {
    // ...
}
// âŒ é”™è¯¯ï¼šæ²¡æœ‰åœ¨ SimpleSecurityConfig.java ä¸­å£°æ˜è¿™ä¸ªè·¯å¾„
```

**ç¦æ­¢ä¾èµ– `anyRequest()` çš„éšå¼åŒ¹é…ï¼š**
```java
// âŒ ç¦æ­¢ï¼šè®¤ä¸º anyRequest().authenticated() ä¼šè‡ªåŠ¨è¦†ç›–æ‰€æœ‰è·¯å¾„
// å¿…é¡»æ˜ç¡®å£°æ˜æ¯ä¸ªAPIè·¯å¾„
```

**ç¦æ­¢å‰ç«¯ç›´æ¥ä½¿ç”¨ `fetch` è€Œä¸è®¾ç½®æ ‡å‡†è¯·æ±‚å¤´ï¼š**
```typescript
// âŒ ç¦æ­¢ï¼šç¼ºå°‘æ ‡å‡†è¯·æ±‚å¤´
const response = await fetch(`${apiBaseUrl}/api/endpoint`, {
  headers: {
    'Content-Type': 'application/json',
    // âŒ ç¼ºå°‘ï¼š'Accept': 'application/json'
    // âŒ ç¼ºå°‘ï¼š'X-Requested-With': 'XMLHttpRequest'
  },
});
```

### âœ… å¿…é¡»æ‰§è¡Œçš„æ£€æŸ¥æ¸…å•

#### æ–°å¢APIæ—¶çš„å¼ºåˆ¶æ£€æŸ¥æ¸…å•

**åç«¯æ£€æŸ¥ï¼ˆå¿…é¡»ï¼‰ï¼š**
- [ ] âœ… åœ¨ `SimpleSecurityConfig.java` ä¸­æ˜ç¡®å£°æ˜æ–°APIè·¯å¾„
- [ ] âœ… å¦‚æœæ˜¯å…¬å¼€APIï¼Œæ·»åŠ åˆ° `permitAll()` åˆ—è¡¨
- [ ] âœ… å¦‚æœéœ€è¦è®¤è¯ï¼Œæ·»åŠ åˆ° `authenticated()` åˆ—è¡¨
- [ ] âœ… æ£€æŸ¥æœªæˆæƒå¤„ç†é€»è¾‘æ˜¯å¦æ­£ç¡®ï¼ˆåŸºäºè·¯å¾„åˆ¤æ–­ï¼‰
- [ ] âœ… éªŒè¯APIè·¯å¾„ä¸ä¼šä¸ç°æœ‰è·¯å¾„å†²çª

**å‰ç«¯æ£€æŸ¥ï¼ˆå¿…é¡»ï¼‰ï¼š**
- [ ] âœ… ä½¿ç”¨ç»Ÿä¸€çš„APIå®¢æˆ·ç«¯ï¼ˆ`apiClient`ï¼‰ï¼Œç¦æ­¢ç›´æ¥ä½¿ç”¨ `fetch`
- [ ] âœ… å¦‚æœå¿…é¡»ä½¿ç”¨ `fetch`ï¼Œå¿…é¡»åŒ…å«ä»¥ä¸‹è¯·æ±‚å¤´ï¼š
  - `'Accept': 'application/json'`
  - `'X-Requested-With': 'XMLHttpRequest'`
  - `'Content-Type': 'application/json'`
  - `Authorization: Bearer ${token}`ï¼ˆå¦‚æœéœ€è¦è®¤è¯ï¼‰
- [ ] âœ… é”™è¯¯å¤„ç†å¿…é¡»æ£€æŸ¥401çŠ¶æ€ç 
- [ ] âœ… é¿å…åœ¨é”™è¯¯å¤„ç†ä¸­ä½¿ç”¨ `window.location.href` é‡å®šå‘ï¼ˆä½¿ç”¨React Routerï¼‰

**æµ‹è¯•æ£€æŸ¥ï¼ˆå¿…é¡»ï¼‰ï¼š**
- [ ] âœ… æ·»åŠ å•å…ƒæµ‹è¯•ï¼Œè¦†ç›–æœªæˆæƒåœºæ™¯
- [ ] âœ… æ·»åŠ é›†æˆæµ‹è¯•ï¼ŒéªŒè¯å®‰å…¨é…ç½®
- [ ] âœ… æ·»åŠ ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆE2Eï¼‰ï¼Œè¦†ç›–å®Œæ•´æµç¨‹
- [ ] âœ… æµ‹è¯•æœªæˆæƒè¯·æ±‚æ˜¯å¦è¿”å›401 JSONï¼ˆä¸æ˜¯302é‡å®šå‘ï¼‰

### ğŸ“‹ æ–°å¢APIçš„æ ‡å‡†æµç¨‹

#### Step 1: åˆ›å»ºAPIæ§åˆ¶å™¨
```java
@RestController
@RequestMapping("/api/new-feature")
public class NewFeatureController {
    // ...
}
```

#### Step 2: æ›´æ–°å®‰å…¨é…ç½®ï¼ˆç«‹å³æ‰§è¡Œï¼ï¼‰
```java
// åœ¨ SimpleSecurityConfig.java ä¸­
.requestMatchers(
    // ... ç°æœ‰è·¯å¾„
    "/api/new-feature/**",  // âœ… æ˜ç¡®å£°æ˜æ–°è·¯å¾„
).authenticated()  // æˆ– .permitAll()
```

#### Step 3: å‰ç«¯APIè°ƒç”¨ï¼ˆä½¿ç”¨ç»Ÿä¸€å®¢æˆ·ç«¯ï¼‰
```typescript
// âœ… æ­£ç¡®ï¼šä½¿ç”¨ç»Ÿä¸€çš„APIå®¢æˆ·ç«¯
import apiClient from '../services/apiService';

const response = await apiClient.get('/new-feature/data');
// apiClient å·²ç»é…ç½®äº†æ ‡å‡†è¯·æ±‚å¤´
```

#### Step 4: å¦‚æœå¿…é¡»ä½¿ç”¨ fetch
```typescript
// âœ… æ­£ç¡®ï¼šåŒ…å«æ‰€æœ‰æ ‡å‡†è¯·æ±‚å¤´
const response = await fetch(`${config.apiBaseUrl}/new-feature/data`, {
  method: 'GET',
  headers: {
    'Content-Type': 'application/json',
    'Accept': 'application/json',  // âœ… å¿…é¡»
    'X-Requested-With': 'XMLHttpRequest',  // âœ… å¿…é¡»
    Authorization: `Bearer ${token}`,  // âœ… å¦‚æœéœ€è¦è®¤è¯
  },
});
```

#### Step 5: æ·»åŠ æµ‹è¯•
```typescript
// âœ… æµ‹è¯•æœªæˆæƒåœºæ™¯
it('should return 401 when not authenticated', async () => {
  const response = await fetch('/api/new-feature/data');
  expect(response.status).toBe(401);
  const data = await response.json();
  expect(data.success).toBe(false);
  expect(data.message).toContain('éœ€è¦ç™»å½•è®¤è¯');
});
```

### ğŸ›¡ï¸ é˜²æŠ¤æªæ–½

**AIå¿…é¡»éµå®ˆçš„é“å¾‹ï¼š**

1. **æ–°å¢APIæ§åˆ¶å™¨æ—¶ â†’ ç«‹å³æ£€æŸ¥å®‰å…¨é…ç½®**
   - å¿…é¡»åŒæ—¶æ›´æ–° `SimpleSecurityConfig.java`
   - ç¦æ­¢ä¾èµ– `anyRequest()` çš„éšå¼åŒ¹é…
   - å¿…é¡»æ˜ç¡®å£°æ˜æ¯ä¸ªAPIè·¯å¾„

2. **å‰ç«¯APIè°ƒç”¨æ—¶ â†’ æ£€æŸ¥è¯·æ±‚å¤´**
   - ä¼˜å…ˆä½¿ç”¨ç»Ÿä¸€çš„ `apiClient`
   - å¦‚æœä½¿ç”¨ `fetch`ï¼Œå¿…é¡»åŒ…å«æ ‡å‡†è¯·æ±‚å¤´
   - ç¦æ­¢ç¼ºå°‘ `Accept: application/json` å¤´

3. **æœªæˆæƒå¤„ç†é€»è¾‘ â†’ åŸºäºè·¯å¾„åˆ¤æ–­**
   - æ‰€æœ‰ `/api/**` è·¯å¾„å¿…é¡»è¿”å›401 JSON
   - ç¦æ­¢è¿”å›302é‡å®šå‘ï¼ˆä¼šå¯¼è‡´CORSé”™è¯¯ï¼‰
   - åˆ¤æ–­é€»è¾‘å¿…é¡»åŸºäºè·¯å¾„ï¼Œä¸èƒ½åªä¾èµ–è¯·æ±‚å¤´

4. **ä»£ç å®¡æŸ¥æ—¶ â†’ æ£€æŸ¥é…ç½®æ›´æ–°**
   - æ£€æŸ¥å®‰å…¨é…ç½®æ˜¯å¦åŒæ­¥æ›´æ–°
   - æ£€æŸ¥å‰ç«¯APIè°ƒç”¨æ˜¯å¦ä½¿ç”¨æ ‡å‡†è¯·æ±‚å¤´
   - æ£€æŸ¥æµ‹è¯•æ˜¯å¦è¦†ç›–æœªæˆæƒåœºæ™¯

### ğŸ” éªŒè¯å‘½ä»¤ï¼ˆAIåº”å®šæœŸæ‰§è¡Œï¼‰

```bash
# éªŒè¯æ‰€æœ‰APIè·¯å¾„éƒ½åœ¨å®‰å…¨é…ç½®ä¸­å£°æ˜
grep -r "@RequestMapping\|@GetMapping\|@PostMapping" backend/get_jobs/src/main/java/controller/ | \
  grep -o '/api/[^"]*' | \
  sort -u | \
  while read path; do
    if ! grep -q "$path" backend/get_jobs/src/main/java/config/SimpleSecurityConfig.java; then
      echo "âš ï¸ è­¦å‘Šï¼š$path æœªåœ¨å®‰å…¨é…ç½®ä¸­å£°æ˜"
    fi
  done

# éªŒè¯å‰ç«¯APIè°ƒç”¨æ˜¯å¦ä½¿ç”¨æ ‡å‡†è¯·æ±‚å¤´
grep -r "fetch.*api" frontend/src --include="*.tsx" --include="*.ts" | \
  grep -v "Accept.*application/json" | \
  grep -v "X-Requested-With" && \
  echo "âš ï¸ è­¦å‘Šï¼šå‘ç°ç¼ºå°‘æ ‡å‡†è¯·æ±‚å¤´çš„APIè°ƒç”¨"
```

### ğŸ“š å‚è€ƒæ–‡æ¡£

- Bugåˆ†ææŠ¥å‘Š: `/root/zhitoujianli/docs/bug-analysis/ADMIN_BACKEND_302_BUG_ANALYSIS.md`
- å®‰å…¨é…ç½®: `backend/get_jobs/src/main/java/config/SimpleSecurityConfig.java`
- APIå®¢æˆ·ç«¯: `frontend/src/services/apiService.ts`

---

**ğŸ¤– AIæé†’ï¼šæ¯æ¬¡æ–°å¢APIæ—¶ï¼Œå¿…é¡»æ‰§è¡Œä¸Šè¿°æ£€æŸ¥æ¸…å•ï¼**

**ğŸš¨ é“å¾‹ï¼šæ–°å¢API = æ›´æ–°å®‰å…¨é…ç½® + ä½¿ç”¨æ ‡å‡†è¯·æ±‚å¤´ + æ·»åŠ æµ‹è¯•ï¼**

