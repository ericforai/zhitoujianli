# èº«ä»½è®¤è¯ä¸æ”¯ä»˜ç³»ç»Ÿ - å®Œæ•´å®æ–½æŒ‡å—

> ğŸ“… åˆ›å»ºæ—¶é—´ï¼š2025å¹´9æœˆ30æ—¥  
> ğŸ¯ ç›®æ ‡ï¼šä»0åˆ°1å®Œæˆèº«ä»½è®¤è¯å’Œæ”¯ä»˜ç³»ç»Ÿé›†æˆ  
> â±ï¸ é¢„è®¡æ—¶é—´ï¼š3-7å¤©

---

## ğŸ“š æ–‡æ¡£ç´¢å¼•

æœ¬æ¬¡æ›´æ–°åŒ…å«ä»¥ä¸‹æ–‡æ¡£ï¼Œè¯·æŒ‰éœ€é˜…è¯»ï¼š

| æ–‡æ¡£åç§° | ç”¨é€” | é˜…è¯»å¯¹è±¡ | é˜…è¯»æ—¶é—´ |
|---------|------|---------|---------|
| **README_AUTH_PAYMENT.md** | å®Œæ•´æŠ€æœ¯æ–¹æ¡ˆå’Œå¯¹æ¯”åˆ†æ | æŠ€æœ¯å†³ç­–è€… | 30åˆ†é’Ÿ |
| **QUICKSTART_AUTH.md** | å¿«é€Ÿä¸Šæ‰‹æŒ‡å—ï¼ˆ10åˆ†é’Ÿé›†æˆï¼‰ | å¼€å‘è€… | 10åˆ†é’Ÿ |
| **IMPLEMENTATION_GUIDE.md**ï¼ˆæœ¬æ–‡æ¡£ï¼‰ | è¯¦ç»†å®æ–½æ­¥éª¤å’Œæ£€æŸ¥æ¸…å• | é¡¹ç›®è´Ÿè´£äºº | 15åˆ†é’Ÿ |

---

## âœ… å®æ–½å‰æ£€æŸ¥æ¸…å•

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®è®¤ä»¥ä¸‹äº‹é¡¹ï¼š

### æŠ€æœ¯å‡†å¤‡

- [ ] JDK 17+å·²å®‰è£…
- [ ] Maven 3.6+å·²å®‰è£…
- [ ] Node.js 16+å·²å®‰è£…
- [ ] é¡¹ç›®èƒ½æ­£å¸¸ç¼–è¯‘è¿è¡Œ
- [ ] æœ‰ç¨³å®šçš„ç½‘ç»œè¿æ¥

### ä¸šåŠ¡å‡†å¤‡

- [ ] ç¡®å®šæ˜¯å¦éœ€è¦ç«‹å³ä¸Šçº¿ï¼ˆå¦‚æœæ˜¯ï¼Œé€‰æ‹©Authingï¼‰
- [ ] ç¡®å®šæ˜¯å¦éœ€è¦æ”¯ä»˜åŠŸèƒ½
- [ ] ï¼ˆæ”¯ä»˜åŠŸèƒ½éœ€è¦ï¼‰æ˜¯å¦æœ‰è¥ä¸šæ‰§ç…§
- [ ] ç¡®å®šé¢„ç®—èŒƒå›´

### äººå‘˜å‡†å¤‡

- [ ] è‡³å°‘1ååç«¯å¼€å‘äººå‘˜
- [ ] è‡³å°‘1åå‰ç«¯å¼€å‘äººå‘˜
- [ ] ï¼ˆå¯é€‰ï¼‰1åè¿ç»´äººå‘˜

---

## ğŸ¯ æ–¹æ¡ˆé€‰æ‹©å†³ç­–æ ‘

```
å¼€å§‹
  â”‚
  â”œâ”€ éœ€è¦å¿«é€Ÿä¸Šçº¿ï¼ˆ< 1å‘¨ï¼‰ï¼Ÿ
  â”‚   â”œâ”€ æ˜¯ â†’ é€‰æ‹© Authing æ–¹æ¡ˆï¼ˆæ¨èï¼‰â­â­â­â­â­
  â”‚   â””â”€ å¦ â†’ ç»§ç»­ä¸‹ä¸€æ­¥
  â”‚
  â”œâ”€ æœ‰ä¸“èŒè¿ç»´å›¢é˜Ÿï¼Ÿ
  â”‚   â”œâ”€ æ˜¯ â†’ å¯ä»¥è€ƒè™‘ Keycloak è‡ªå»ºæ–¹æ¡ˆâ­â­â­â­
  â”‚   â””â”€ å¦ â†’ é€‰æ‹© Authing æ–¹æ¡ˆâ­â­â­â­â­
  â”‚
  â”œâ”€ ç”¨æˆ·é‡é¢„æœŸå¤šå¤§ï¼Ÿ
  â”‚   â”œâ”€ < 8000 MAU â†’ Authing å…è´¹ç‰ˆâ­â­â­â­â­
  â”‚   â”œâ”€ 8000-50000 MAU â†’ Authing ä»˜è´¹ç‰ˆæˆ–Keycloakâ­â­â­â­
  â”‚   â””â”€ > 50000 MAU â†’ Keycloak è‡ªå»ºâ­â­â­â­
  â”‚
  â””â”€ æ•°æ®æ˜¯å¦å¿…é¡»å®Œå…¨è‡ªä¸»æ§åˆ¶ï¼Ÿ
      â”œâ”€ æ˜¯ â†’ Keycloak è‡ªå»ºæ–¹æ¡ˆâ­â­â­â­
      â””â”€ å¦ â†’ Authing æ–¹æ¡ˆâ­â­â­â­â­
```

**ç»“è®º**ï¼šå¯¹äºæœ¬é¡¹ç›®ï¼Œå¼ºçƒˆæ¨è **Authingæ–¹æ¡ˆ**

---

## ğŸ“… è¯¦ç»†å®æ–½è®¡åˆ’ï¼ˆ7å¤©ï¼‰

### ç¬¬1å¤©ï¼šå‡†å¤‡ä¸æ³¨å†Œï¼ˆ2å°æ—¶ï¼‰

#### ä¸Šåˆï¼ˆ1å°æ—¶ï¼‰
- [ ] 9:00-9:30: é˜…è¯» `README_AUTH_PAYMENT.md`ï¼Œäº†è§£å®Œæ•´æ–¹æ¡ˆ
- [ ] 9:30-10:00: æ³¨å†ŒAuthingè´¦å·ï¼Œåˆ›å»ºç”¨æˆ·æ± å’Œåº”ç”¨

**æ“ä½œæ­¥éª¤**ï¼š
```
1. è®¿é—® https://authing.cn/
2. ä½¿ç”¨æ‰‹æœºå·æ³¨å†Œè´¦å·
3. åˆ›å»ºç”¨æˆ·æ± ï¼šåç§°"æ™ºæŠ•ç®€å†"
4. åˆ›å»ºåº”ç”¨ï¼šåç§°"æ™ºæŠ•ç®€å†åå°"
5. è®°å½•é…ç½®ä¿¡æ¯åˆ°å®‰å…¨çš„åœ°æ–¹ï¼ˆä¸è¦æäº¤åˆ°Gitï¼‰
```

#### ä¸‹åˆï¼ˆ1å°æ—¶ï¼‰
- [ ] 14:00-14:30: é…ç½®Authingç™»å½•æ–¹å¼ï¼ˆæ‰‹æœºå·ã€é‚®ç®±ï¼‰
- [ ] 14:30-15:00: æµ‹è¯•Authingæ§åˆ¶å°åŠŸèƒ½

**é…ç½®é¡¹**ï¼š
- å¯ç”¨"æ‰‹æœºå·éªŒè¯ç ç™»å½•"
- å¯ç”¨"é‚®ç®±å¯†ç ç™»å½•"
- é…ç½®çŸ­ä¿¡æœåŠ¡å•†ï¼ˆæ¨èé˜¿é‡Œäº‘SMSï¼‰

### ç¬¬2å¤©ï¼šåç«¯é›†æˆï¼ˆ6å°æ—¶ï¼‰

#### ä¸Šåˆï¼ˆ3å°æ—¶ï¼‰
- [ ] 9:00-9:30: æ›´æ–° `pom.xml`ï¼Œæ·»åŠ ä¾èµ–
- [ ] 9:30-10:00: è¿è¡Œ `mvn clean install`ï¼Œç¡®ä¿ä¾èµ–ä¸‹è½½æˆåŠŸ
- [ ] 10:00-10:30: é…ç½® `.env` æ–‡ä»¶ï¼Œæ·»åŠ Authingé…ç½®
- [ ] 10:30-11:00: åˆ›å»º `application.yml` é…ç½®æ–‡ä»¶
- [ ] 11:00-12:00: åˆ›å»º `AuthingConfig.java` é…ç½®ç±»

**å‘½ä»¤è®°å½•**ï¼š
```bash
# åœ¨ /Users/user/autoresume/get_jobs ç›®å½•ä¸‹æ‰§è¡Œ
cd /Users/user/autoresume/get_jobs

# æ›´æ–°Mavenä¾èµ–
mvn clean install

# å¤‡ä»½åŸæœ‰.envæ–‡ä»¶
cp src/main/resources/.env src/main/resources/.env.backup

# ç¼–è¾‘.envæ–‡ä»¶ï¼Œæ·»åŠ Authingé…ç½®
# vim src/main/resources/.env
```

#### ä¸‹åˆï¼ˆ3å°æ—¶ï¼‰
- [ ] 14:00-15:00: åˆ›å»º `AuthController.java`ï¼Œå®ç°ç™»å½•API
- [ ] 15:00-16:00: åˆ›å»º `SecurityConfig.java`ï¼Œé…ç½®Spring Security
- [ ] 16:00-17:00: åˆ›å»º `JwtAuthenticationFilter.java`ï¼Œå®ç°TokenéªŒè¯

**éªŒè¯æ­¥éª¤**ï¼š
```bash
# å¯åŠ¨åç«¯
mvn spring-boot:run

# æµ‹è¯•å¥åº·æ£€æŸ¥ï¼ˆæ–°å¼€ç»ˆç«¯ï¼‰
curl http://localhost:8080/api/auth/health
```

### ç¬¬3å¤©ï¼šåç«¯æµ‹è¯•ï¼ˆ4å°æ—¶ï¼‰

#### ä¸Šåˆï¼ˆ2å°æ—¶ï¼‰
- [ ] 9:00-9:30: æµ‹è¯•æ³¨å†ŒAPI
- [ ] 9:30-10:00: æµ‹è¯•é‚®ç®±ç™»å½•API
- [ ] 10:00-10:30: æµ‹è¯•æ‰‹æœºå·éªŒè¯ç ç™»å½•
- [ ] 10:30-11:00: è°ƒè¯•å’Œä¿®å¤é—®é¢˜

**æµ‹è¯•è„šæœ¬**ï¼š
```bash
# æµ‹è¯•æ³¨å†Œ
curl -X POST http://localhost:8080/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"test123456","username":"æµ‹è¯•ç”¨æˆ·"}'

# æµ‹è¯•ç™»å½•
curl -X POST http://localhost:8080/api/auth/login/email \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"test123456"}'

# ä¿å­˜è¿”å›çš„tokenï¼Œæµ‹è¯•å—ä¿æŠ¤æ¥å£
TOKEN="eyJhbGci..."
curl http://localhost:8080/status \
  -H "Authorization: Bearer $TOKEN"
```

#### ä¸‹åˆï¼ˆ2å°æ—¶ï¼‰
- [ ] 14:00-15:00: æ›´æ–° `WebController.java`ï¼Œæ·»åŠ è®¤è¯æ”¯æŒ
- [ ] 15:00-16:00: æµ‹è¯•æ‰€æœ‰å—ä¿æŠ¤çš„API
- [ ] 16:00-16:30: ç¼–å†™æµ‹è¯•æ–‡æ¡£
- [ ] 16:30-17:00: ä»£ç reviewå’Œä¼˜åŒ–

### ç¬¬4å¤©ï¼šå‰ç«¯é›†æˆï¼ˆ6å°æ—¶ï¼‰

#### ä¸Šåˆï¼ˆ3å°æ—¶ï¼‰
- [ ] 9:00-9:30: å®‰è£…å‰ç«¯ä¾èµ– `npm install @authing/web axios`
- [ ] 9:30-10:30: åˆ›å»º `authService.ts` è®¤è¯æœåŠ¡
- [ ] 10:30-11:30: åˆ›å»º `Login.tsx` ç™»å½•ç»„ä»¶
- [ ] 11:30-12:00: åˆ›å»º `Register.tsx` æ³¨å†Œç»„ä»¶

**å‘½ä»¤è®°å½•**ï¼š
```bash
# åœ¨å‰ç«¯é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œ
cd /Users/user/autoresume/zhitoujianli-website

# å®‰è£…ä¾èµ–
npm install @authing/web axios react-router-dom

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm start
```

#### ä¸‹åˆï¼ˆ3å°æ—¶ï¼‰
- [ ] 14:00-15:00: åˆ›å»º `PrivateRoute.tsx` è·¯ç”±å®ˆå«
- [ ] 15:00-16:00: æ›´æ–° `App.tsx`ï¼Œé…ç½®è·¯ç”±
- [ ] 16:00-17:00: æ›´æ–°ç°æœ‰ç»„ä»¶ï¼Œæ·»åŠ ç™»å‡ºæŒ‰é’®

### ç¬¬5å¤©ï¼šUIä¼˜åŒ–ä¸æµ‹è¯•ï¼ˆ6å°æ—¶ï¼‰

#### ä¸Šåˆï¼ˆ3å°æ—¶ï¼‰
- [ ] 9:00-10:00: ä¼˜åŒ–ç™»å½•é¡µé¢UI
- [ ] 10:00-11:00: æ·»åŠ åŠ è½½åŠ¨ç”»å’Œé”™è¯¯æç¤º
- [ ] 11:00-12:00: å®ç°è®°ä½ç™»å½•çŠ¶æ€

#### ä¸‹åˆï¼ˆ3å°æ—¶ï¼‰
- [ ] 14:00-15:00: å®Œæ•´æµç¨‹æµ‹è¯•
- [ ] 15:00-16:00: ä¿®å¤å‘ç°çš„é—®é¢˜
- [ ] 16:00-17:00: å‡†å¤‡æµ‹è¯•æŠ¥å‘Š

**æµ‹è¯•ç”¨ä¾‹**ï¼š
```
âœ“ æœªç™»å½•è®¿é—®å—ä¿æŠ¤é¡µé¢ â†’ è·³è½¬åˆ°ç™»å½•é¡µ
âœ“ é‚®ç®±å¯†ç æ³¨å†Œ â†’ æ³¨å†ŒæˆåŠŸ
âœ“ é‚®ç®±å¯†ç ç™»å½• â†’ ç™»å½•æˆåŠŸï¼Œè·³è½¬åˆ°ä¸»é¡µ
âœ“ é”™è¯¯çš„å¯†ç  â†’ æ˜¾ç¤ºé”™è¯¯æç¤º
âœ“ å‘é€æ‰‹æœºéªŒè¯ç  â†’ æ”¶åˆ°éªŒè¯ç 
âœ“ æ‰‹æœºå·éªŒè¯ç ç™»å½• â†’ ç™»å½•æˆåŠŸ
âœ“ Tokenè¿‡æœŸ â†’ è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ
âœ“ ç™»å‡º â†’ æ¸…é™¤Tokenï¼Œè·³è½¬åˆ°ç™»å½•é¡µ
```

### ç¬¬6å¤©ï¼šæ”¯ä»˜åŠŸèƒ½ï¼ˆå¯é€‰ï¼Œ6å°æ—¶ï¼‰

âš ï¸ **å‰ç½®æ¡ä»¶**ï¼šå¿…é¡»æœ‰è¥ä¸šæ‰§ç…§

#### ä¸Šåˆï¼ˆ3å°æ—¶ï¼‰
- [ ] 9:00-10:00: ç”³è¯·å¾®ä¿¡æ”¯ä»˜å•†æˆ·å·
- [ ] 10:00-11:00: ç”³è¯·æ”¯ä»˜å®å•†æˆ·å·
- [ ] 11:00-12:00: ä¸‹è½½æ”¯ä»˜è¯ä¹¦å’Œå¯†é’¥

#### ä¸‹åˆï¼ˆ3å°æ—¶ï¼‰
- [ ] 14:00-15:00: é›†æˆå¾®ä¿¡æ”¯ä»˜SDK
- [ ] 15:00-16:00: é›†æˆæ”¯ä»˜å®SDK
- [ ] 16:00-17:00: å®ç°æ”¯ä»˜å›è°ƒå¤„ç†

### ç¬¬7å¤©ï¼šä¸Šçº¿å‡†å¤‡ï¼ˆ4å°æ—¶ï¼‰

- [ ] 9:00-10:00: é…ç½®HTTPSè¯ä¹¦
- [ ] 10:00-11:00: é…ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡
- [ ] 11:00-12:00: å®‰å…¨æ£€æŸ¥å’Œä»£ç å®¡æŸ¥
- [ ] 14:00-15:00: éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
- [ ] 15:00-16:00: ç”Ÿäº§ç¯å¢ƒæµ‹è¯•
- [ ] 16:00-17:00: ç¼–å†™è¿ç»´æ–‡æ¡£

---

## ğŸ”§ å…³é”®é…ç½®æ–‡ä»¶æ¸…å•

### åç«¯é…ç½®æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | ç”¨é€” | æ˜¯å¦å¿…éœ€ |
|---------|------|---------|
| `pom.xml` | Mavenä¾èµ–é…ç½® | âœ… å¿…éœ€ |
| `application.yml` | Spring Booté…ç½® | âœ… å¿…éœ€ |
| `.env` | æ•æ„Ÿä¿¡æ¯é…ç½® | âœ… å¿…éœ€ |
| `config/AuthingConfig.java` | Authingé…ç½®ç±» | âœ… å¿…éœ€ |
| `config/SecurityConfig.java` | å®‰å…¨é…ç½® | âœ… å¿…éœ€ |
| `security/JwtAuthenticationFilter.java` | JWTè¿‡æ»¤å™¨ | âœ… å¿…éœ€ |
| `controller/AuthController.java` | è®¤è¯æ§åˆ¶å™¨ | âœ… å¿…éœ€ |
| `controller/PaymentController.java` | æ”¯ä»˜æ§åˆ¶å™¨ | â­• å¯é€‰ |

### å‰ç«¯é…ç½®æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | ç”¨é€” | æ˜¯å¦å¿…éœ€ |
|---------|------|---------|
| `services/authService.ts` | è®¤è¯æœåŠ¡ | âœ… å¿…éœ€ |
| `components/Login.tsx` | ç™»å½•ç»„ä»¶ | âœ… å¿…éœ€ |
| `components/Register.tsx` | æ³¨å†Œç»„ä»¶ | âœ… å¿…éœ€ |
| `components/PrivateRoute.tsx` | è·¯ç”±å®ˆå« | âœ… å¿…éœ€ |
| `App.tsx` | è·¯ç”±é…ç½® | âœ… å¿…éœ€æ›´æ–° |

---

## ğŸš¨ å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1ï¼šMavenä¾èµ–ä¸‹è½½å¤±è´¥

**ç°è±¡**ï¼š
```
Failed to download cn.authing:authing-java-sdk
```

**è§£å†³**ï¼š
```bash
# æ–¹æ³•1ï¼šä½¿ç”¨é˜¿é‡Œäº‘Mavené•œåƒ
# ç¼–è¾‘ ~/.m2/settings.xmlï¼Œæ·»åŠ é˜¿é‡Œäº‘é•œåƒ

# æ–¹æ³•2ï¼šæ‰‹åŠ¨æŒ‡å®šä»“åº“
mvn clean install -U -Dmaven.repo.remote=https://maven.aliyun.com/repository/public
```

### é—®é¢˜2ï¼šSpring Securityæ‹¦æˆªæ‰€æœ‰è¯·æ±‚

**ç°è±¡**ï¼šè®¿é—®ç™»å½•é¡µé¢ä¹Ÿè¿”å›403

**åŸå› **ï¼š`SecurityConfig.java` é…ç½®é”™è¯¯

**è§£å†³**ï¼š
```java
// ç¡®ä¿ç™»å½•ç›¸å…³è·¯å¾„åœ¨permitAll()ä¸­
.requestMatchers(
    "/api/auth/**",
    "/login",
    "/register"
).permitAll()
```

### é—®é¢˜3ï¼šå‰ç«¯è·¨åŸŸé—®é¢˜

**ç°è±¡**ï¼š
```
Access to XMLHttpRequest blocked by CORS policy
```

**è§£å†³**ï¼š
```java
// åœ¨SecurityConfigä¸­é…ç½®CORS
.cors(cors -> cors.configurationSource(corsConfigurationSource()))
```

### é—®é¢˜4ï¼šTokenéªŒè¯å¤±è´¥

**ç°è±¡**ï¼šç™»å½•æˆåŠŸï¼Œä½†è®¿é—®APIè¿”å›401

**æ’æŸ¥æ­¥éª¤**ï¼š
1. æ£€æŸ¥å‰ç«¯æ˜¯å¦æ­£ç¡®å‘é€Token
2. æ£€æŸ¥åç«¯æ˜¯å¦æ­£ç¡®è§£æToken
3. æ£€æŸ¥Authingé…ç½®æ˜¯å¦æ­£ç¡®

```bash
# è°ƒè¯•å‘½ä»¤
# 1. æ‰“å°Token
echo $TOKEN

# 2. è§£ç JWTï¼ˆåœ¨ https://jwt.io/ ç½‘ç«™ï¼‰

# 3. æµ‹è¯•API
curl -v http://localhost:8080/api/status \
  -H "Authorization: Bearer $TOKEN"
```

### é—®é¢˜5ï¼šAuthing SDKåˆå§‹åŒ–å¤±è´¥

**ç°è±¡**ï¼š
```
Authingç®¡ç†å®¢æˆ·ç«¯åˆå§‹åŒ–å¤±è´¥
```

**è§£å†³**ï¼š
1. æ£€æŸ¥ `.env` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
2. æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®åŠ è½½
3. æ£€æŸ¥ `application.yml` é…ç½®

```bash
# æ£€æŸ¥ç¯å¢ƒå˜é‡
cat src/main/resources/.env | grep AUTHING

# æµ‹è¯•é…ç½®
curl http://localhost:8080/api/auth/health
```

---

## ğŸ“Š å®æ–½è¿›åº¦è¿½è¸ªè¡¨

| é˜¶æ®µ | ä»»åŠ¡ | è´Ÿè´£äºº | é¢„è®¡æ—¶é—´ | å®é™…æ—¶é—´ | çŠ¶æ€ |
|------|------|--------|---------|---------|------|
| **å‡†å¤‡** | é˜…è¯»æ–‡æ¡£ | - | 1h | - | â¬œ æœªå¼€å§‹ |
| **å‡†å¤‡** | æ³¨å†ŒAuthing | - | 0.5h | - | â¬œ æœªå¼€å§‹ |
| **åç«¯** | æ·»åŠ Mavenä¾èµ– | - | 0.5h | - | â¬œ æœªå¼€å§‹ |
| **åç«¯** | é…ç½®ç¯å¢ƒå˜é‡ | - | 0.5h | - | â¬œ æœªå¼€å§‹ |
| **åç«¯** | åˆ›å»ºé…ç½®ç±» | - | 1h | - | â¬œ æœªå¼€å§‹ |
| **åç«¯** | åˆ›å»ºè®¤è¯æ§åˆ¶å™¨ | - | 2h | - | â¬œ æœªå¼€å§‹ |
| **åç«¯** | é…ç½®Spring Security | - | 1h | - | â¬œ æœªå¼€å§‹ |
| **åç«¯** | åˆ›å»ºJWTè¿‡æ»¤å™¨ | - | 1h | - | â¬œ æœªå¼€å§‹ |
| **åç«¯** | åç«¯æµ‹è¯• | - | 2h | - | â¬œ æœªå¼€å§‹ |
| **å‰ç«¯** | å®‰è£…ä¾èµ– | - | 0.5h | - | â¬œ æœªå¼€å§‹ |
| **å‰ç«¯** | åˆ›å»ºè®¤è¯æœåŠ¡ | - | 1h | - | â¬œ æœªå¼€å§‹ |
| **å‰ç«¯** | åˆ›å»ºç™»å½•ç»„ä»¶ | - | 2h | - | â¬œ æœªå¼€å§‹ |
| **å‰ç«¯** | åˆ›å»ºè·¯ç”±å®ˆå« | - | 1h | - | â¬œ æœªå¼€å§‹ |
| **å‰ç«¯** | å‰ç«¯æµ‹è¯• | - | 2h | - | â¬œ æœªå¼€å§‹ |
| **é›†æˆ** | è”è°ƒæµ‹è¯• | - | 2h | - | â¬œ æœªå¼€å§‹ |
| **ä¸Šçº¿** | éƒ¨ç½²ä¸Šçº¿ | - | 2h | - | â¬œ æœªå¼€å§‹ |

**çŠ¶æ€æ ‡è¯†**ï¼š
- â¬œ æœªå¼€å§‹
- ğŸŸ¨ è¿›è¡Œä¸­
- âœ… å·²å®Œæˆ
- âŒ é‡åˆ°é—®é¢˜

---

## ğŸ“ æŠ€æœ¯åŸ¹è®­è¦ç‚¹

### ç»™åç«¯å¼€å‘äººå‘˜

**éœ€è¦äº†è§£çš„æ¦‚å¿µ**ï¼š
1. **OAuth 2.0**ï¼šæˆæƒæ¡†æ¶ï¼Œç†è§£æˆæƒç æ¨¡å¼
2. **JWT**ï¼šJSON Web Tokenï¼Œç†è§£Tokenç»“æ„å’ŒéªŒè¯
3. **Spring Security**ï¼šSpringå®‰å…¨æ¡†æ¶ï¼Œç†è§£è¿‡æ»¤å™¨é“¾
4. **Authing SDK**ï¼šå¦‚ä½•è°ƒç”¨APIè·å–ç”¨æˆ·ä¿¡æ¯

**å­¦ä¹ èµ„æº**ï¼š
- OAuth 2.0æ•™ç¨‹ï¼šhttps://www.ruanyifeng.com/blog/2019/04/oauth_design.html
- JWTæ•™ç¨‹ï¼šhttps://jwt.io/introduction
- Authingæ–‡æ¡£ï¼šhttps://docs.authing.cn/v2/

### ç»™å‰ç«¯å¼€å‘äººå‘˜

**éœ€è¦äº†è§£çš„æ¦‚å¿µ**ï¼š
1. **Tokenå­˜å‚¨**ï¼šlocalStorage vs sessionStorage
2. **è¯·æ±‚æ‹¦æˆªå™¨**ï¼šaxios interceptor
3. **è·¯ç”±å®ˆå«**ï¼šReact Router protected routes
4. **Authing Web SDK**ï¼šå¦‚ä½•é›†æˆç™»å½•ç»„ä»¶

**å­¦ä¹ èµ„æº**ï¼š
- Authing Web SDKï¼šhttps://docs.authing.cn/v2/reference/sdk-for-web/
- React Routerï¼šhttps://reactrouter.com/

---

## ğŸ” å®‰å…¨æ£€æŸ¥æ¸…å•

åœ¨ä¸Šçº¿å‰ï¼Œè¯·ç¡®ä¿ï¼š

### ä»£ç å®‰å…¨
- [ ] `.env` æ–‡ä»¶å·²æ·»åŠ åˆ° `.gitignore`
- [ ] æ²¡æœ‰ç¡¬ç¼–ç çš„å¯†é’¥æˆ–å¯†ç 
- [ ] æ‰€æœ‰æ•æ„Ÿä¿¡æ¯éƒ½ä»ç¯å¢ƒå˜é‡è¯»å–
- [ ] å¯†ç å­—æ®µä½¿ç”¨ `type="password"`

### ä¼ è¾“å®‰å…¨
- [ ] ç”Ÿäº§ç¯å¢ƒä½¿ç”¨HTTPS
- [ ] é…ç½®äº†HSTSå¤´
- [ ] Cookieè®¾ç½®äº† `Secure` å’Œ `HttpOnly`

### APIå®‰å…¨
- [ ] æ‰€æœ‰ç®¡ç†APIéƒ½éœ€è¦è®¤è¯
- [ ] å®ç°äº†é€Ÿç‡é™åˆ¶ï¼ˆé˜²æ­¢æš´åŠ›ç ´è§£ï¼‰
- [ ] å®ç°äº†CORSç™½åå•
- [ ] éªŒè¯äº†æ‰€æœ‰ç”¨æˆ·è¾“å…¥

### æ•°æ®å®‰å…¨
- [ ] æ—¥å¿—ä¸è¾“å‡ºæ•æ„Ÿä¿¡æ¯ï¼ˆå¯†ç ã€Tokenç­‰ï¼‰
- [ ] é”™è¯¯ä¿¡æ¯ä¸æ³„éœ²ç³»ç»Ÿç»†èŠ‚
- [ ] å®ç°äº†å®¡è®¡æ—¥å¿—ï¼ˆè®°å½•ç™»å½•ã€æ”¯ä»˜ç­‰æ“ä½œï¼‰

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### åç«¯ä¼˜åŒ–

1. **Tokenç¼“å­˜**ï¼š
```java
// ä½¿ç”¨Caffeineç¼“å­˜å·²éªŒè¯çš„Tokenï¼Œå‡å°‘Authing APIè°ƒç”¨
@Cacheable(value = "tokens", key = "#token")
public UserInfo validateToken(String token) {
    // ...
}
```

2. **è¿æ¥æ± é…ç½®**ï¼š
```yaml
spring:
  datasource:
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
```

### å‰ç«¯ä¼˜åŒ–

1. **æ‡’åŠ è½½ç™»å½•ç»„ä»¶**ï¼š
```typescript
const Login = lazy(() => import('./components/Login'));
```

2. **Tokenè‡ªåŠ¨åˆ·æ–°**ï¼š
```typescript
// åœ¨Tokenå¿«è¿‡æœŸæ—¶è‡ªåŠ¨åˆ·æ–°
setInterval(() => {
  if (isTokenExpiringSoon()) {
    authService.refreshToken(refreshToken);
  }
}, 5 * 60 * 1000); // æ¯5åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
```

---

## ğŸ“ ä¸Šçº¿æ£€æŸ¥æ¸…å•

### ä¸Šçº¿å‰ï¼ˆå¿…é¡»å®Œæˆï¼‰

- [ ] æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] å®‰å…¨æ£€æŸ¥å®Œæˆ
- [ ] æ€§èƒ½æµ‹è¯•å®Œæˆï¼ˆå“åº”æ—¶é—´ < 2sï¼‰
- [ ] å¤‡ä»½äº†æ•°æ®åº“å’Œé…ç½®æ–‡ä»¶
- [ ] å‡†å¤‡äº†å›æ»šæ–¹æ¡ˆ
- [ ] é…ç½®äº†ç›‘æ§å’Œå‘Šè­¦

### ä¸Šçº¿åï¼ˆå¿…é¡»å®Œæˆï¼‰

- [ ] éªŒè¯ç”Ÿäº§ç¯å¢ƒåŠŸèƒ½æ­£å¸¸
- [ ] æµ‹è¯•æ”¯ä»˜æµç¨‹ï¼ˆå¦‚æœ‰ï¼‰
- [ ] ç›‘æ§æ—¥å¿—ï¼Œç¡®ä¿æ— å¼‚å¸¸
- [ ] é€šçŸ¥ç”¨æˆ·æ–°åŠŸèƒ½ä¸Šçº¿

### æŒç»­æ”¹è¿›

- [ ] æ”¶é›†ç”¨æˆ·åé¦ˆ
- [ ] ç›‘æ§ç™»å½•æˆåŠŸç‡
- [ ] ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ
- [ ] å®šæœŸå®‰å…¨å®¡è®¡

---

## ğŸ“ ç´§æ€¥è”ç³»æ–¹å¼

### æŠ€æœ¯æ”¯æŒ

| é—®é¢˜ç±»å‹ | è”ç³»æ–¹å¼ | å“åº”æ—¶é—´ |
|---------|---------|---------|
| **Authingç›¸å…³** | å…¬ä¼—å·"Authing" | å·¥ä½œæ—¥å†…24h |
| **å¾®ä¿¡æ”¯ä»˜** | å•†æˆ·å¹³å°å·¥å• | 24h |
| **æ”¯ä»˜å®** | å¼€æ”¾å¹³å°å·¥å• | 24h |
| **é¡¹ç›®å†…éƒ¨** | QQç¾¤ | å®æ—¶ |

### æ–‡æ¡£æ›´æ–°

æœ¬æ–‡æ¡£ä¼šæŒç»­æ›´æ–°ï¼Œæœ€æ–°ç‰ˆæœ¬è¯·æŸ¥çœ‹é¡¹ç›®READMEã€‚

---

## ğŸ‰ å®Œæˆæ ‡å¿—

å½“ä½ å®Œæˆä»¥ä¸‹æ‰€æœ‰äº‹é¡¹ï¼Œå³è¡¨ç¤ºå®æ–½æˆåŠŸï¼š

âœ… ç”¨æˆ·å¯ä»¥é€šè¿‡æ‰‹æœºå·æ³¨å†Œå¹¶ç™»å½•  
âœ… ç”¨æˆ·å¯ä»¥é€šè¿‡é‚®ç®±æ³¨å†Œå¹¶ç™»å½•  
âœ… æœªç™»å½•ç”¨æˆ·æ— æ³•è®¿é—®åå°ç®¡ç†  
âœ… ç™»å½•åå¯ä»¥æ­£å¸¸ä½¿ç”¨æ‰€æœ‰åŠŸèƒ½  
âœ… Tokenè¿‡æœŸåè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ  
âœ… æ‰€æœ‰APIéƒ½æœ‰è®¤è¯ä¿æŠ¤  
âœ… ï¼ˆå¯é€‰ï¼‰æ”¯ä»˜åŠŸèƒ½æ­£å¸¸å·¥ä½œ  

**æ­å–œä½ ï¼ä½ çš„é¡¹ç›®ç°åœ¨æ‹¥æœ‰ä¼ä¸šçº§çš„å®‰å…¨ä¿æŠ¤ï¼** ğŸŠ

---

## ğŸ“š é™„å½•

### A. Mavenä¾èµ–è¯´æ˜

```xml
<!-- Authing SDKï¼šæä¾›å®Œæ•´çš„è®¤è¯åŠŸèƒ½ -->
<dependency>
    <groupId>cn.authing</groupId>
    <artifactId>authing-java-sdk</artifactId>
    <version>3.0.0</version>
</dependency>

<!-- Spring Securityï¼šæä¾›å®‰å…¨æ¡†æ¶ -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-security</artifactId>
</dependency>

<!-- JJWTï¼šç”¨äºæœ¬åœ°éªŒè¯JWT Token -->
<dependency>
    <groupId>io.jsonwebtoken</groupId>
    <artifactId>jjwt-api</artifactId>
    <version>0.12.5</version>
</dependency>
```

### B. ç¯å¢ƒå˜é‡å®Œæ•´åˆ—è¡¨

```bash
# ========== Authingé…ç½®ï¼ˆå¿…éœ€ï¼‰ ==========
AUTHING_USER_POOL_ID=6xxxxxxxxxxxxxxx
AUTHING_APP_ID=6xxxxxxxxxxxxxxx
AUTHING_APP_SECRET=6xxxxxxxxxxxxxxx
AUTHING_APP_HOST=https://your-domain.authing.cn

# ========== JWTé…ç½®ï¼ˆå¿…éœ€ï¼‰ ==========
JWT_SECRET=at_least_32_characters_random_string
JWT_EXPIRATION=86400000

# ========== å¾®ä¿¡æ”¯ä»˜é…ç½®ï¼ˆå¯é€‰ï¼‰ ==========
WECHAT_PAY_MERCHANT_ID=your_merchant_id
WECHAT_PAY_API_KEY=your_api_key
WECHAT_PAY_CERT_PATH=src/main/resources/apiclient_cert.p12
WECHAT_PAY_NOTIFY_URL=https://yourdomain.com/api/payment/wechat/notify

# ========== æ”¯ä»˜å®é…ç½®ï¼ˆå¯é€‰ï¼‰ ==========
ALIPAY_APP_ID=your_app_id
ALIPAY_PRIVATE_KEY=your_private_key
ALIPAY_PUBLIC_KEY=alipay_public_key
ALIPAY_NOTIFY_URL=https://yourdomain.com/api/payment/alipay/notify
```

### C. APIæ¥å£æ¸…å•

#### è®¤è¯ç›¸å…³API

| æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ | æ˜¯å¦éœ€è¦Token |
|------|------|------|--------------|
| POST | `/api/auth/register` | æ³¨å†Œæ–°ç”¨æˆ· | âŒ |
| POST | `/api/auth/login/email` | é‚®ç®±ç™»å½• | âŒ |
| POST | `/api/auth/login/phone` | æ‰‹æœºå·ç™»å½• | âŒ |
| POST | `/api/auth/send-code` | å‘é€éªŒè¯ç  | âŒ |
| GET | `/api/auth/user/info` | è·å–ç”¨æˆ·ä¿¡æ¯ | âœ… |
| POST | `/api/auth/logout` | ç™»å‡º | âœ… |
| POST | `/api/auth/refresh` | åˆ·æ–°Token | âŒ |
| GET | `/api/auth/health` | å¥åº·æ£€æŸ¥ | âŒ |

#### æ”¯ä»˜ç›¸å…³API

| æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ | æ˜¯å¦éœ€è¦Token |
|------|------|------|--------------|
| POST | `/api/payment/wechat/create` | åˆ›å»ºå¾®ä¿¡æ”¯ä»˜è®¢å• | âœ… |
| POST | `/api/payment/wechat/notify` | å¾®ä¿¡æ”¯ä»˜å›è°ƒ | âŒ |
| POST | `/api/payment/alipay/create` | åˆ›å»ºæ”¯ä»˜å®è®¢å• | âœ… |
| POST | `/api/payment/alipay/notify` | æ”¯ä»˜å®å›è°ƒ | âŒ |
| GET | `/api/payment/order/{orderNo}` | æŸ¥è¯¢è®¢å•çŠ¶æ€ | âœ… |
| GET | `/api/payment/config` | è·å–æ”¯ä»˜é…ç½® | âŒ |

---

## ğŸš€ å¼€å§‹å®æ–½

ç°åœ¨ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å¼€å§‹ï¼š

1. **ä»Šå¤©ï¼ˆç¬¬1å¤©ï¼‰**ï¼š
   ```bash
   # 1. æ³¨å†ŒAuthingè´¦å·
   # è®¿é—® https://authing.cn/
   
   # 2. å…‹éš†ä»£ç å·²ç»åŒ…å«æ‰€æœ‰å¿…è¦æ–‡ä»¶
   # 3. é…ç½®.envæ–‡ä»¶
   cd /Users/user/autoresume/get_jobs
   cp src/main/resources/.env_template src/main/resources/.env
   vim src/main/resources/.env  # æ·»åŠ Authingé…ç½®
   ```

2. **æ˜å¤©ï¼ˆç¬¬2å¤©ï¼‰**ï¼š
   ```bash
   # 1. æ›´æ–°Mavenä¾èµ–
   cd /Users/user/autoresume/get_jobs
   mvn clean install
   
   # 2. å¯åŠ¨åç«¯æµ‹è¯•
   mvn spring-boot:run
   
   # 3. æµ‹è¯•API
   curl http://localhost:8080/api/auth/health
   ```

3. **ç¬¬3å¤©åŠä»¥å**ï¼š
   - æŒ‰ç…§å®æ–½è®¡åˆ’é€æ­¥å®Œæˆ
   - é‡åˆ°é—®é¢˜æŸ¥çœ‹"å¸¸è§é—®é¢˜æ’æŸ¥"
   - è®°å½•å®é™…è¿›åº¦åˆ°"å®æ–½è¿›åº¦è¿½è¸ªè¡¨"

---

**ç¥å®æ–½é¡ºåˆ©ï¼å¦‚æœ‰é—®é¢˜ï¼Œéšæ—¶åœ¨QQç¾¤æˆ–GitHub Issuesä¸­è®¨è®ºã€‚** ğŸ’ª
