<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ™ºæŠ•ç®€å† - æ™ºèƒ½ç®€å†ç®¡ç†</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      .tab-content {
        display: none;
      }
      .tab-content.active {
        display: block;
      }
      .tab-button.active {
        border-bottom-color: #4f46e5;
        color: #4f46e5;
      }
    </style>
  </head>
  <body class="min-h-screen bg-gray-50">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <nav class="bg-white shadow-sm border-b border-gray-200">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16">
          <div class="flex items-center">
            <h1 class="text-2xl font-bold text-indigo-600">æ™ºæŠ•ç®€å†</h1>
            <span class="ml-4 text-sm text-gray-500">è®¿å®¢æ¨¡å¼</span>
          </div>
          <div class="flex items-center space-x-4">
            <span class="text-sm text-gray-700">æ¬¢è¿ï¼Œè®¿å®¢ç”¨æˆ·</span>
          </div>
        </div>
      </div>
    </nav>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <!-- é¡µé¢æ ‡é¢˜ -->
      <div class="mb-8">
        <h2 class="text-3xl font-bold text-gray-900">æ™ºèƒ½ç®€å†ç®¡ç†</h2>
        <p class="mt-2 text-gray-600">ä½¿ç”¨AIæ™ºèƒ½åŒ¹é…ï¼Œæ‰¾åˆ°æœ€é€‚åˆçš„èŒä½</p>
      </div>

      <!-- åŠŸèƒ½æ ‡ç­¾é¡µ -->
      <div class="border-b border-gray-200 mb-8">
        <nav class="-mb-px flex space-x-8">
          <button
            id="resume-tab"
            class="tab-button flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm border-indigo-500 text-indigo-600"
            onclick="switchTab('resume')"
          >
            <span>ğŸ“„</span>
            <span>ç®€å†ç®¡ç†</span>
          </button>
          <button
            id="config-tab"
            class="tab-button flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"
            onclick="switchTab('config')"
          >
            <span>âš™ï¸</span>
            <span>æŠ•é€’é…ç½®</span>
          </button>
          <button
            id="delivery-tab"
            class="tab-button flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"
            onclick="switchTab('delivery')"
          >
            <span>ğŸš€</span>
            <span>è‡ªåŠ¨æŠ•é€’</span>
          </button>
        </nav>
      </div>

      <!-- æ ‡ç­¾é¡µå†…å®¹ -->
      <div>
        <!-- ç®€å†ç®¡ç†æ ‡ç­¾é¡µ -->
        <div id="resume-content" class="tab-content active">
          <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-xl font-semibold mb-4">ç®€å†ç®¡ç†</h3>
            <p class="text-gray-600 mb-6">
              ä¸Šä¼ ã€ç¼–è¾‘å’Œç®¡ç†æ‚¨çš„ç®€å†ä¿¡æ¯ï¼Œä¸ºæ™ºèƒ½æŠ•é€’åšå‡†å¤‡
            </p>

            <!-- ç®€å†çŠ¶æ€ -->
            <div id="resume-status" class="mb-6">
              <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                <div class="flex items-center">
                  <div
                    class="animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-600 mr-2"
                  ></div>
                  <span class="text-yellow-800">æ­£åœ¨æ£€æŸ¥ç®€å†çŠ¶æ€...</span>
                </div>
              </div>
            </div>

            <!-- ä¸Šä¼ ç®€å†æ–‡ä»¶ -->
            <div
              class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center"
            >
              <div class="space-y-4">
                <div class="text-4xl">â˜ï¸</div>
                <div>
                  <p class="text-lg font-medium text-gray-900">ä¸Šä¼ ç®€å†æ–‡ä»¶</p>
                  <p class="text-sm text-gray-500">
                    æ”¯æŒ PDFã€DOCã€DOCXã€TXT æ ¼å¼ï¼Œæœ€å¤§ 10MB
                  </p>
                </div>
                <div>
                  <input
                    type="file"
                    id="file-input"
                    accept=".pdf,.doc,.docx,.txt"
                    class="hidden"
                    onchange="handleFileUpload(event)"
                  />
                  <button
                    onclick="document.getElementById('file-input').click()"
                    class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors"
                  >
                    é€‰æ‹©æ–‡ä»¶
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- æŠ•é€’é…ç½®æ ‡ç­¾é¡µ -->
        <div id="config-content" class="tab-content">
          <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-xl font-semibold mb-4">æŠ•é€’é…ç½®</h3>
            <p class="text-gray-600 mb-6">é…ç½®æŠ•é€’ç­–ç•¥å’Œå‚æ•°ï¼Œä¼˜åŒ–æŠ•é€’æ•ˆæœ</p>

            <div class="space-y-6">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >æŠ•é€’é—´éš”ï¼ˆç§’ï¼‰</label
                >
                <input
                  type="number"
                  value="60"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"
                />
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >æ¯æ—¥æŠ•é€’ä¸Šé™</label
                >
                <input
                  type="number"
                  value="50"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"
                />
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >å…³é”®è¯è¿‡æ»¤</label
                >
                <textarea
                  rows="3"
                  placeholder="è¾“å…¥è¦è¿‡æ»¤çš„å…³é”®è¯ï¼Œæ¯è¡Œä¸€ä¸ª"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"
                ></textarea>
              </div>

              <button
                class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors"
              >
                ä¿å­˜é…ç½®
              </button>
            </div>
          </div>
        </div>

        <!-- è‡ªåŠ¨æŠ•é€’æ ‡ç­¾é¡µ -->
        <div id="delivery-content" class="tab-content">
          <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-xl font-semibold mb-4">è‡ªåŠ¨æŠ•é€’</h3>
            <p class="text-gray-600 mb-6">
              å¯åŠ¨è‡ªåŠ¨æŠ•é€’ä»»åŠ¡ï¼Œæ™ºèƒ½åŒ¹é…èŒä½å¹¶æŠ•é€’ç®€å†
            </p>

            <div class="space-y-6">
              <!-- æŠ•é€’çŠ¶æ€ -->
              <div class="bg-gray-50 rounded-lg p-4">
                <h4 class="font-medium text-gray-900 mb-2">æŠ•é€’çŠ¶æ€</h4>
                <div class="flex items-center space-x-2">
                  <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                  <span class="text-gray-700">æœªå¯åŠ¨</span>
                </div>
              </div>

              <!-- æŠ•é€’ç»Ÿè®¡ -->
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="bg-blue-50 rounded-lg p-4 text-center">
                  <div class="text-2xl font-bold text-blue-600">0</div>
                  <div class="text-sm text-gray-600">ä»Šæ—¥æŠ•é€’</div>
                </div>
                <div class="bg-green-50 rounded-lg p-4 text-center">
                  <div class="text-2xl font-bold text-green-600">0</div>
                  <div class="text-sm text-gray-600">æˆåŠŸæŠ•é€’</div>
                </div>
                <div class="bg-yellow-50 rounded-lg p-4 text-center">
                  <div class="text-2xl font-bold text-yellow-600">0</div>
                  <div class="text-sm text-gray-600">å¾…å¤„ç†</div>
                </div>
              </div>

              <!-- æ§åˆ¶æŒ‰é’® -->
              <div class="flex space-x-4">
                <button
                  class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors"
                >
                  å¯åŠ¨æŠ•é€’
                </button>
                <button
                  class="bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-colors"
                >
                  åœæ­¢æŠ•é€’
                </button>
                <button
                  class="bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition-colors"
                >
                  æŸ¥çœ‹è®°å½•
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // æ ‡ç­¾é¡µåˆ‡æ¢
      function switchTab(tabName) {
        // éšè—æ‰€æœ‰å†…å®¹
        document.querySelectorAll('.tab-content').forEach(content => {
          content.classList.remove('active');
        });

        // é‡ç½®æ‰€æœ‰æŒ‰é’®æ ·å¼
        document.querySelectorAll('.tab-button').forEach(button => {
          button.classList.remove('border-indigo-500', 'text-indigo-600');
          button.classList.add('border-transparent', 'text-gray-500');
        });

        // æ˜¾ç¤ºé€‰ä¸­çš„å†…å®¹
        document.getElementById(tabName + '-content').classList.add('active');

        // è®¾ç½®é€‰ä¸­çš„æŒ‰é’®æ ·å¼
        const activeButton = document.getElementById(tabName + '-tab');
        activeButton.classList.remove('border-transparent', 'text-gray-500');
        activeButton.classList.add('border-indigo-500', 'text-indigo-600');
      }

      // æ£€æŸ¥ç®€å†çŠ¶æ€
      async function checkResumeStatus() {
        const statusDiv = document.getElementById('resume-status');

        try {
          const response = await fetch(
            'http://115.190.182.95:8080/api/candidate-resume/check',
            {
              method: 'GET',
              headers: {
                'Content-Type': 'application/json',
                Origin: 'http://115.190.182.95:3000',
              },
              mode: 'cors',
            }
          );

          if (response.ok) {
            const data = await response.json();

            if (data.hasResume) {
              statusDiv.innerHTML = `
                <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                  <div class="flex items-center">
                    <div class="text-green-600 mr-2">âœ…</div>
                    <span class="text-green-800">ç®€å†å·²ä¸Šä¼ ï¼Œå¯ä»¥å¼€å§‹æŠ•é€’</span>
                  </div>
                </div>
              `;
            } else {
              statusDiv.innerHTML = `
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                  <div class="flex items-center">
                    <div class="text-blue-600 mr-2">â„¹ï¸</div>
                    <span class="text-blue-800">å°šæœªä¸Šä¼ ç®€å†ï¼Œè¯·å…ˆä¸Šä¼ ç®€å†æ–‡ä»¶</span>
                  </div>
                </div>
              `;
            }
          } else {
            throw new Error('APIè°ƒç”¨å¤±è´¥');
          }
        } catch (error) {
          console.error('æ£€æŸ¥ç®€å†çŠ¶æ€å¤±è´¥:', error);
          statusDiv.innerHTML = `
            <div class="bg-red-50 border border-red-200 rounded-lg p-4">
              <div class="flex items-center">
                <div class="text-red-600 mr-2">âŒ</div>
                <span class="text-red-800">æ£€æŸ¥ç®€å†çŠ¶æ€å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•</span>
              </div>
            </div>
          `;
        }
      }

      // å¤„ç†æ–‡ä»¶ä¸Šä¼ 
      function handleFileUpload(event) {
        const file = event.target.files[0];
        if (!file) return;

        // éªŒè¯æ–‡ä»¶ç±»å‹
        const allowedTypes = [
          'application/pdf',
          'application/msword',
          'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
          'text/plain',
        ];
        if (
          !allowedTypes.includes(file.type) &&
          !file.name.match(/\.(pdf|doc|docx|txt)$/i)
        ) {
          alert('ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ï¼Œè¯·ä¸Šä¼ PDFã€DOCã€DOCXã€TXTæ–‡ä»¶');
          return;
        }

        // éªŒè¯æ–‡ä»¶å¤§å°ï¼ˆ10MBï¼‰
        if (file.size > 10 * 1024 * 1024) {
          alert('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡10MB');
          return;
        }

        // æ˜¾ç¤ºä¸Šä¼ è¿›åº¦
        const statusDiv = document.getElementById('resume-status');
        statusDiv.innerHTML = `
          <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
            <div class="flex items-center">
              <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"></div>
              <span class="text-blue-800">æ­£åœ¨ä¸Šä¼ ç®€å†æ–‡ä»¶: ${file.name}</span>
            </div>
          </div>
        `;

        // æ¨¡æ‹Ÿä¸Šä¼ ï¼ˆå®é™…åº”è¯¥è°ƒç”¨APIï¼‰
        setTimeout(() => {
          statusDiv.innerHTML = `
            <div class="bg-green-50 border border-green-200 rounded-lg p-4">
              <div class="flex items-center">
                <div class="text-green-600 mr-2">âœ…</div>
                <span class="text-green-800">ç®€å†ä¸Šä¼ æˆåŠŸï¼</span>
              </div>
            </div>
          `;
        }, 2000);
      }

      // é¡µé¢åŠ è½½å®Œæˆåæ£€æŸ¥ç®€å†çŠ¶æ€
      window.addEventListener('load', function () {
        console.log('é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹æ£€æŸ¥ç®€å†çŠ¶æ€...');
        checkResumeStatus();
      });
    </script>
  </body>
</html>
