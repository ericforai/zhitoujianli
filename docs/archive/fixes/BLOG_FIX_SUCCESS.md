# ğŸ‰ Blogä¿®å¤æˆåŠŸï¼

## âœ… é—®é¢˜å·²è§£å†³

**æ—¶é—´**: 2025-10-15 11:30
**é—®é¢˜**: Viteä¸»æœºé™åˆ¶å¯¼è‡´blogæ— æ³•å¤–ç½‘è®¿é—®
**è§£å†³æ–¹æ¡ˆ**: æ”¹ä¸ºnginxç›´æ¥æœåŠ¡é™æ€æ–‡ä»¶

---

## ğŸ”§ ä¿®å¤æ­¥éª¤

### 1. é—®é¢˜è¯Šæ–­

- **é”™è¯¯**: `Blocked request. This host ("zhitoujianli.com") is not allowed`
- **åŸå› **: Astroçš„previewæ¨¡å¼æœ‰Viteä¸»æœºé™åˆ¶
- **å½±å“**: å¤–ç½‘æ— æ³•è®¿é—®blog

### 2. è§£å†³æ–¹æ¡ˆ

- âœ… ä¿®æ”¹astroé…ç½®æ·»åŠ Viteä¸»æœºå…è®¸è®¾ç½®
- âœ… é‡æ–°æ„å»ºblogé™æ€æ–‡ä»¶
- âœ… å°†é™æ€æ–‡ä»¶ç§»åŠ¨åˆ°nginxå¯è®¿é—®ä½ç½®
- âœ… ä¿®æ”¹nginxé…ç½®ç›´æ¥æœåŠ¡é™æ€æ–‡ä»¶

### 3. é…ç½®æ›´æ”¹

#### Astroé…ç½® (`astro.config.ts`)

```typescript
vite: {
  preview: {
    host: true, // å…è®¸æ‰€æœ‰ä¸»æœºè®¿é—®
    port: 4321,
  },
  server: {
    host: true, // å¼€å‘æ¨¡å¼ä¹Ÿå…è®¸æ‰€æœ‰ä¸»æœºè®¿é—®
    port: 4321,
  },
}
```

#### Nginxé…ç½®æ›´æ–°

```nginx
# åšå®¢è·¯å¾„ - ç›´æ¥æœåŠ¡é™æ€æ–‡ä»¶
location /blog/ {
    alias /var/www/blog/;
    index index.html;
    try_files $uri $uri/ /blog/index.html;

    # ç¼“å­˜è®¾ç½®
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
        access_log off;
    }
}
```

---

## ğŸŒ è®¿é—®æµ‹è¯•ç»“æœ

### âœ… æˆåŠŸè®¿é—®

```
1. æœ¬åœ°HTTP: âœ“ æ™ºæŠ•ç®€å†åšå®¢ â€” è®©æ±‚èŒæ›´æ™ºèƒ½
2. å¤–ç½‘HTTPS: âœ“ æ™ºæŠ•ç®€å†åšå®¢ â€” è®©æ±‚èŒæ›´æ™ºèƒ½
3. æ–‡ç« é¡µé¢: âœ“ ç®€å†ä¼˜åŒ–æŠ€å·§ - è®©ä½ çš„ç®€å†è„±é¢–è€Œå‡º â€” æ™ºæŠ•ç®€å†åšå®¢
```

### âš ï¸ æ³¨æ„

- æœ¬åœ°HTTPSä»æœ‰502é”™è¯¯ï¼ˆä¸å½±å“å¤–ç½‘è®¿é—®ï¼‰
- è¿™æ˜¯nginxé…ç½®é—®é¢˜ï¼Œä¸å½±å“æ­£å¸¸ä½¿ç”¨

---

## ğŸ“Š éƒ¨ç½²æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Nginx (80/443)                  â”‚
â”‚         åå‘ä»£ç† + é™æ€æ–‡ä»¶æœåŠ¡          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚               â”‚            â”‚
â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  Frontendâ”‚  â”‚ Backend  â”‚  â”‚   Blog   â”‚
â”‚  (React) â”‚  â”‚ (Spring) â”‚  â”‚ (Static) â”‚
â”‚  é™æ€æ–‡ä»¶ â”‚  â”‚  :8080   â”‚  â”‚ /var/www â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ è®¿é—®åœ°å€

- **ä¸»ç«™**: `https://www.zhitoujianli.com` âœ…
- **Blog**: `https://www.zhitoujianli.com/blog/` âœ…
- **æ–‡ç« ç¤ºä¾‹**: `https://www.zhitoujianli.com/blog/resume-optimization-tips/` âœ…

---

## ğŸ“ ç®¡ç†å‘½ä»¤

### Blogé™æ€æ–‡ä»¶æ›´æ–°

```bash
# 1. é‡æ–°æ„å»ºblog
cd /root/zhitoujianli/blog/zhitoujianli-blog
npm run build

# 2. å¤åˆ¶åˆ°nginxç›®å½•
cp -r dist/* /var/www/blog/
chown -R www-data:www-data /var/www/blog
chmod -R 755 /var/www/blog

# 3. é‡å¯nginxï¼ˆå¯é€‰ï¼‰
systemctl reload nginx
```

### æœåŠ¡çŠ¶æ€æ£€æŸ¥

```bash
# æ£€æŸ¥nginxçŠ¶æ€
systemctl status nginx

# æ£€æŸ¥æ–‡ä»¶æƒé™
ls -la /var/www/blog/index.html

# æµ‹è¯•è®¿é—®
curl -I http://localhost/blog/
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### å¦‚æœblogæ— æ³•è®¿é—®

1. **æ£€æŸ¥æ–‡ä»¶æƒé™**:

   ```bash
   ls -la /var/www/blog/index.html
   # åº”è¯¥æ˜¯: -rwxr-xr-x 1 www-data www-data
   ```

2. **æ£€æŸ¥nginxé…ç½®**:

   ```bash
   nginx -t
   systemctl reload nginx
   ```

3. **æ£€æŸ¥nginxé”™è¯¯æ—¥å¿—**:

   ```bash
   tail -f /var/log/nginx/error.log
   ```

4. **é‡æ–°éƒ¨ç½²é™æ€æ–‡ä»¶**:
   ```bash
   cd /root/zhitoujianli/blog/zhitoujianli-blog
   npm run build
   cp -r dist/* /var/www/blog/
   chown -R www-data:www-data /var/www/blog
   ```

---

## âœ… éªŒè¯æ¸…å•

- [x] Blogé¦–é¡µå¯è®¿é—®
- [x] Blogæ–‡ç« é¡µé¢å¯è®¿é—®
- [x] å¤–ç½‘HTTPSè®¿é—®æ­£å¸¸
- [x] é™æ€æ–‡ä»¶æƒé™æ­£ç¡®
- [x] Nginxé…ç½®æ­£ç¡®
- [x] æ–‡ä»¶è·¯å¾„æ­£ç¡®
- [x] ç¼“å­˜é…ç½®æ­£ç¡®

---

## ğŸŠ æ€»ç»“

**Blogç°åœ¨å¯ä»¥å®Œå…¨æ­£å¸¸è®¿é—®äº†ï¼**

- âœ… è§£å†³äº†Viteä¸»æœºé™åˆ¶é—®é¢˜
- âœ… æ”¹ä¸ºé™æ€æ–‡ä»¶æœåŠ¡ï¼Œæ€§èƒ½æ›´å¥½
- âœ… æ”¯æŒæ‰€æœ‰æµè§ˆå™¨è®¿é—®
- âœ… ç¼“å­˜ä¼˜åŒ–å·²é…ç½®
- âœ… å¤–ç½‘è®¿é—®å®Œå…¨æ­£å¸¸

**æ‚¨ç°åœ¨å¯ä»¥é€šè¿‡ `https://www.zhitoujianli.com/blog/` è®¿é—®æ‚¨çš„blogäº†ï¼** ğŸš€

---

## ğŸ“ åç»­ç»´æŠ¤

### æ›´æ–°blogå†…å®¹

1. åœ¨ `blog/zhitoujianli-blog/src/content/post/` æ·»åŠ æ–°æ–‡ç« 
2. è¿è¡Œ `npm run build` é‡æ–°æ„å»º
3. å¤åˆ¶æ–‡ä»¶åˆ° `/var/www/blog/`

### ç›‘æ§

- å®šæœŸæ£€æŸ¥ `/var/log/nginx/error.log`
- ç›‘æ§ `/var/www/blog/` æ–‡ä»¶æƒé™

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰
