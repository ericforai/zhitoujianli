# 智投简历平台 - 快速使用指南

## 🚀 快速开始

### 系统概述
智投简历平台是一个个人求职平台，提供三层访问权限控制和细分化的商业配额管理。

### 🌐 访问地址
- **首页**: http://localhost:3000/ (公开访问，无需登录)
- **博客**: http://localhost:4321/blog/ (公开访问，无需登录)  
- **后台管理**: http://localhost:8080/ (需要登录，不能单独访问)

### 🔐 访问流程
1. 用户必须先在**首页**进行登录注册
2. 登录成功后才能访问**后台管理**系统
3. 如果直接访问后台管理，会自动跳转到首页登录页面

## 💡 用户套餐说明

| 套餐类型 | 价格 | 主要特性 |
|---------|------|----------|
| 🆓 免费版 | 免费 | 基础功能，有使用限制 |
| 📦 基础版 | 付费 | 更多配额，基础功能齐全 |
| 💼 专业版 | 付费 | 高级功能，优先支持 |
| 🚀 旗舰版 | 付费 | 无限使用，所有功能 |

## 📊 配额管理说明

### 主要配额类型

| 功能 | 免费版 | 基础版 | 专业版 | 旗舰版 |
|------|--------|--------|--------|--------|
| 📝 简历生成 | 5次/月 | 20次/月 | 100次/月 | ♾️ 无限 |
| 🤖 AI优化 | 3次/月 | 15次/月 | 50次/月 | ♾️ 无限 |
| 📤 职位投递 | 10次/月 | 50次/月 | 200次/月 | ♾️ 无限 |
| 🎨 模板使用 | 3个 | 10个 | 所有 | 所有 |
| 📄 PDF导出 | 5次/月 | 30次/月 | 200次/月 | ♾️ 无限 |
| 💾 存储空间 | 100MB | 500MB | 2GB | 10GB |

## 👥 用户角色

### 🙋‍♂️ 普通用户
- 注册登录
- 使用各项功能
- 受配额限制
- 可升级套餐

### 👨‍💼 平台管理员
- 管理普通用户
- 查看使用统计
- 配置系统参数
- 不受配额限制

### 👑 超级管理员
- 所有权限
- 管理平台管理员
- 系统级操作
- 核心配置修改

## 🛠️ 如何使用

### 1️⃣ 首次使用

1. **访问首页**: 打开 http://localhost:3000/
2. **注册账户**: 点击"注册"按钮创建新账户
3. **验证登录**: 登录成功后可以看到用户信息
4. **进入后台**: 点击"管理后台"按钮进入管理系统

### 2️⃣ 日常使用

#### 📝 生成简历
```
1. 登录后台管理系统
2. 选择"简历管理"
3. 点击"新建简历"
4. 填写个人信息
5. 选择简历模板
6. 生成并预览简历
```

#### 🤖 AI优化简历
```
1. 在简历编辑页面
2. 点击"AI优化"按钮
3. 系统自动分析并优化内容
4. 查看优化建议
5. 应用或修改建议
```

#### 📤 投递管理
```
1. 进入"投递管理"页面
2. 添加目标职位信息
3. 选择对应简历
4. 记录投递状态
5. 跟踪投递进度
```

### 3️⃣ 管理员使用

#### 👨‍💼 平台管理员操作

**查看用户列表**
```http
GET /api/admin/users
```

**查看用户配额使用情况**
```http
GET /api/admin/users/{userId}/quotas
```

**升级用户套餐**
```http
PUT /api/admin/users/{userId}/plan
{
    "planType": "PROFESSIONAL"
}
```

**重置用户配额**
```http
POST /api/admin/users/{userId}/quotas/reset
```

**查看平台统计**
```http
GET /api/admin/statistics
```

## 🔧 开发者使用

### 添加配额检查

在业务方法上添加注解：

```java
@PostMapping("/generate")
@CheckQuota(quotaKey = "resume_generation", amount = 1, message = "简历生成次数已用完，请升级套餐")
public Result generateResume(@RequestBody ResumeRequest request) {
    // 业务逻辑
    return Result.success();
}
```

### 自定义配额检查

```java
@Service
public class CustomService {
    @Autowired
    private QuotaService quotaService;
    
    public void businessMethod(String userId) {
        // 检查配额
        if (!quotaService.checkQuotaLimit(userId, "custom_quota", 1)) {
            throw new QuotaExceededException("配额不足");
        }
        
        // 执行业务逻辑
        doSomething();
        
        // 消费配额
        quotaService.consumeQuota(userId, "custom_quota", 1);
    }
}
```

## 🐛 常见问题

### ❓ 无法访问后台管理
**问题**: 直接访问 http://localhost:8080/ 被重定向
**解决**: 必须先在首页 http://localhost:3000/ 登录

### ❓ 登录后仍显示未认证
**问题**: 在首页登录成功，但后台显示未登录
**解决**: 检查浏览器Cookie设置，清除缓存后重试

### ❓ 配额检查不生效
**问题**: 超出配额限制仍能继续使用
**解决**: 检查方法是否添加了 `@CheckQuota` 注解

### ❓ 管理员无法访问管理接口
**问题**: 平台管理员无法使用管理功能
**解决**: 检查用户表中的 `admin_level` 字段设置

## 📞 技术支持

### 🔍 日志调试
启用调试日志查看详细信息：

```yaml
logging:
  level:
    com.autoresume.quota: DEBUG
    com.autoresume.admin: DEBUG
```

### 🏥 健康检查
检查系统运行状态：

```http
GET /actuator/health
```

### 📈 监控指标
关注以下指标：
- API响应时间
- 配额消费速率
- 用户活跃度
- 系统资源使用

## 📝 总结

智投简历平台通过三层访问权限控制和细分配额管理，为个人求职者提供了安全、高效的简历管理服务。系统支持灵活的商业方案配置，可以满足不同用户的需求。

### 🎯 核心优势
- ✅ **安全可靠**: 三层权限控制，数据隔离
- ✅ **灵活配置**: 13种配额类型，支持自定义
- ✅ **易于管理**: 类似OSS的管理员系统
- ✅ **开发友好**: 基于注解的配额检查
- ✅ **商业友好**: 多套餐支持，灵活定价

通过本指南，用户可以快速上手使用平台的各项功能，开发者也可以便捷地进行功能扩展和定制开发。