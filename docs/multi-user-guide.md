# å¤šç”¨æˆ·æ¨¡å¼ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

æ™ºæŠ•ç®€å†ç³»ç»Ÿæ”¯æŒä¸¤ç§è¿è¡Œæ¨¡å¼ï¼š

1. **å•ç”¨æˆ·æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰**ï¼šæ— éœ€æ³¨å†Œç™»å½•ï¼Œæ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨`default_user`
2. **å¤šç”¨æˆ·æ¨¡å¼**ï¼šéœ€è¦æ³¨å†Œç™»å½•ï¼Œæ¯ä¸ªç”¨æˆ·ç‹¬ç«‹é…ç½®å’Œæ•°æ®

## æ¨¡å¼åˆ‡æ¢

### å¯ç”¨å¤šç”¨æˆ·æ¨¡å¼

**ç®¡ç†å‘˜æ“ä½œï¼š**

1. ç¼–è¾‘åç«¯é…ç½®æ–‡ä»¶ `backend/get_jobs/.env`ï¼š

```properties
# ä¿®æ”¹å‰
SECURITY_ENABLED=false

# ä¿®æ”¹å
SECURITY_ENABLED=true
```

2. é‡å¯åç«¯æœåŠ¡ï¼š

```bash
systemctl restart get_jobs
# æˆ–
ps aux | grep java | grep get_jobs | awk '{print $2}' | xargs kill
cd /opt/zhitoujianli/backend && java -jar get_jobs-v2.0.1.jar &
```

### å…³é—­å¤šç”¨æˆ·æ¨¡å¼ï¼ˆå›é€€åˆ°å•ç”¨æˆ·ï¼‰

ä¿®æ”¹`.env`æ–‡ä»¶ä¸­çš„`SECURITY_ENABLED=false`ï¼Œé‡å¯æœåŠ¡å³å¯ã€‚

## ç”¨æˆ·æ“ä½œæŒ‡å—

### å•ç”¨æˆ·æ¨¡å¼ï¼ˆSECURITY_ENABLED=falseï¼‰

**ç‰¹ç‚¹**ï¼š
- âœ… æ— éœ€æ³¨å†Œç™»å½•
- âœ… ç›´æ¥è®¿é—®æ‰€æœ‰åŠŸèƒ½
- âœ… æ•°æ®å­˜å‚¨åœ¨`user_data/default_user/`

**ä½¿ç”¨æ­¥éª¤**ï¼š

1. è®¿é—® `https://zhitoujianli.com/config`
2. ç›´æ¥è®¾ç½®é…ç½®å’Œä¸Šä¼ ç®€å†
3. å¼€å§‹æŠ•é€’

### å¤šç”¨æˆ·æ¨¡å¼ï¼ˆSECURITY_ENABLED=trueï¼‰

**ç‰¹ç‚¹**ï¼š
- ğŸ” éœ€è¦æ³¨å†Œç™»å½•
- ğŸ” æ¯ä¸ªç”¨æˆ·ç‹¬ç«‹é…ç½®å’Œç®€å†
- ğŸ” Cookieå’Œç™»å½•çŠ¶æ€éš”ç¦»
- ğŸ” å¯å¤šäººåŒæ—¶ä½¿ç”¨ç³»ç»Ÿ

**ä½¿ç”¨æ­¥éª¤**ï¼š

#### 1. æ³¨å†Œè´¦å·

è®¿é—® `https://zhitoujianli.com/register`ï¼ˆå¦‚æœæœ‰æ³¨å†Œé¡µé¢ï¼‰

æˆ–é€šè¿‡APIæ³¨å†Œï¼š

```bash
curl -X POST https://zhitoujianli.com/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "your-email@example.com",
    "password": "your-password",
    "username": "Your Name"
  }'
```

**å“åº”ç¤ºä¾‹**ï¼š

```json
{
  "success": true,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "token": "eyJhbGc...",
  "user": {
    "userId": 1,
    "email": "your-email@example.com",
    "username": "Your Name"
  }
}
```

**é‡è¦æç¤º**ï¼š
- é¦–ä¸ªæ³¨å†Œç”¨æˆ·å°†è‡ªåŠ¨ç»§æ‰¿`default_user`çš„é…ç½®å’Œç®€å†
- åç»­ç”¨æˆ·éœ€è¦é‡æ–°é…ç½®

#### 2. ç™»å½•

è®¿é—®ç™»å½•é¡µé¢æˆ–é€šè¿‡APIï¼š

```bash
curl -X POST https://zhitoujianli.com/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "your-email@example.com",
    "password": "your-password"
  }'
```

#### 3. ä½¿ç”¨Tokenè®¿é—®ç³»ç»Ÿ

å°†è¿”å›çš„`token`ä¿å­˜åˆ°æµè§ˆå™¨`localStorage`ï¼š

```javascript
localStorage.setItem('authToken', 'eyJhbGc...');
```

æˆ–åœ¨APIè¯·æ±‚ä¸­æºå¸¦ï¼š

```bash
curl https://zhitoujianli.com/api/config \
  -H "Authorization: Bearer eyJhbGc..."
```

#### 4. ç®¡ç†ä¸ªäººé…ç½®

è®¿é—® `https://zhitoujianli.com/config`ï¼Œæ‚¨çš„é…ç½®å°†ä¿å­˜åˆ°ï¼š

```
user_data/user_{æ‚¨çš„ID}/config.json
```

## æ•°æ®è¿ç§»è¯´æ˜

### é¦–ä¸ªç”¨æˆ·çš„ç‰¹æ®Šå¤„ç†

**åœºæ™¯**ï¼šä»å•ç”¨æˆ·æ¨¡å¼åˆ‡æ¢åˆ°å¤šç”¨æˆ·æ¨¡å¼æ—¶

**è‡ªåŠ¨æ“ä½œ**ï¼š
1. ç¬¬ä¸€ä¸ªæ³¨å†Œçš„ç”¨æˆ·ä¼šè‡ªåŠ¨ç»§æ‰¿`default_user`çš„æ‰€æœ‰æ•°æ®
2. åŒ…æ‹¬ï¼šé…ç½®æ–‡ä»¶ã€ç®€å†ã€Cookieç­‰
3. åŸ`default_user`æ•°æ®ä¼šå¤‡ä»½åˆ°`user_data/default_user.backup/`

**éªŒè¯è¿ç§»æˆåŠŸ**ï¼š

```bash
# æ£€æŸ¥æ•°æ®ç›®å½•
ls -la /opt/zhitoujianli/backend/user_data/

# é¢„æœŸç»“æœï¼š
# - default_user/        ï¼ˆåŸæ•°æ®ä¿ç•™ï¼‰
# - default_user.backup/ ï¼ˆè‡ªåŠ¨å¤‡ä»½ï¼‰
# - user_1/              ï¼ˆé¦–ä¸ªç”¨æˆ·ï¼Œç»§æ‰¿è‡ªdefault_userï¼‰
```

### æ•°æ®å›æ»š

å¦‚æœè¿ç§»å‡ºç°é—®é¢˜ï¼Œç®¡ç†å‘˜å¯ä»¥å›æ»šï¼š

```bash
# åˆ é™¤å½“å‰default_user
rm -rf /opt/zhitoujianli/backend/user_data/default_user

# ä»å¤‡ä»½æ¢å¤
cp -r /opt/zhitoujianli/backend/user_data/default_user.backup \
     /opt/zhitoujianli/backend/user_data/default_user

# å…³é—­å¤šç”¨æˆ·æ¨¡å¼
sed -i 's/SECURITY_ENABLED=true/SECURITY_ENABLED=false/' /opt/zhitoujianli/backend/.env

# é‡å¯æœåŠ¡
systemctl restart get_jobs
```

## å¤šç”¨æˆ·å¹¶å‘é™åˆ¶

### ç³»ç»Ÿé™åˆ¶

- **æœ€å¤§å¹¶å‘æŠ•é€’ç”¨æˆ·æ•°**ï¼š5ï¼ˆå¯åœ¨`.env`ä¸­é…ç½®`MAX_CONCURRENT_DELIVERIES`ï¼‰
- **æ¯ç”¨æˆ·ä¸€æ¬¡åªèƒ½ä¸€ä¸ªç™»å½•æµç¨‹**
- **ç™»å½•è¶…æ—¶æ—¶é—´**ï¼š10åˆ†é’Ÿ

### è¶…å‡ºé™åˆ¶æ—¶çš„å¤„ç†

**å½“ç³»ç»Ÿç¹å¿™æ—¶**ï¼š

```json
{
  "success": false,
  "message": "ç³»ç»Ÿç¹å¿™ï¼Œå½“å‰æŠ•é€’ç”¨æˆ·è¿‡å¤šï¼Œè¯·ç¨åå†è¯•",
  "currentDeliveries": 5
}
```

**å»ºè®®**ï¼šç­‰å¾…5-10åˆ†é’Ÿåé‡è¯•

## å¸¸è§é—®é¢˜

### Q1: åˆ‡æ¢åˆ°å¤šç”¨æˆ·æ¨¡å¼åï¼ŒåŸæ¥çš„é…ç½®è¿˜åœ¨å—ï¼Ÿ

**ç­”**ï¼šåœ¨ï¼æ‚¨çš„é…ç½®ä»ç„¶åœ¨`user_data/default_user/`ç›®å½•ï¼Œä¸”é¦–ä¸ªæ³¨å†Œç”¨æˆ·ä¼šè‡ªåŠ¨ç»§æ‰¿è¿™äº›æ•°æ®ã€‚

### Q2: å¤šä¸ªç”¨æˆ·å¯ä»¥åŒæ—¶æŠ•é€’å—ï¼Ÿ

**ç­”**ï¼šå¯ä»¥ï¼æ¯ä¸ªç”¨æˆ·æœ‰ç‹¬ç«‹çš„Browserå®ä¾‹å’ŒCookieï¼Œäº’ä¸å¹²æ‰°ã€‚ä½†ç³»ç»Ÿæœ€å¤šæ”¯æŒ5ä¸ªç”¨æˆ·åŒæ—¶æŠ•é€’ï¼ˆå¯é…ç½®ï¼‰ã€‚

### Q3: å¦‚ä½•æŸ¥çœ‹æˆ‘çš„ç”¨æˆ·IDï¼Ÿ

**ç­”**ï¼šç™»å½•åè®¿é—®é…ç½®é¡µé¢ï¼Œé¡µé¢é¡¶éƒ¨ä¼šæ˜¾ç¤ºæ‚¨çš„ç”¨æˆ·IDå’Œé‚®ç®±ã€‚

### Q4: å¿˜è®°å¯†ç æ€ä¹ˆåŠï¼Ÿ

**ç­”**ï¼šç›®å‰éœ€è¦è”ç³»ç®¡ç†å‘˜é‡ç½®ã€‚åç»­ç‰ˆæœ¬å°†æ”¯æŒé‚®ç®±æ‰¾å›å¯†ç ã€‚

### Q5: å¯ä»¥åˆ é™¤è´¦å·å—ï¼Ÿ

**ç­”**ï¼šç³»ç»Ÿæ”¯æŒè½¯åˆ é™¤ã€‚è”ç³»ç®¡ç†å‘˜å¤„ç†ã€‚

### Q6: å¤šç”¨æˆ·æ¨¡å¼ä¸‹æ€§èƒ½ä¼šä¸‹é™å—ï¼Ÿ

**ç­”**ï¼šå•ä¸ªç”¨æˆ·ä½¿ç”¨æ—¶æ€§èƒ½æ— å·®å¼‚ã€‚å¤šç”¨æˆ·å¹¶å‘æŠ•é€’æ—¶ï¼Œæ¯ä¸ªç”¨æˆ·å ç”¨çº¦500MBå†…å­˜ã€‚

## å®‰å…¨å»ºè®®

### å¯†ç å®‰å…¨

- âœ… ä½¿ç”¨å¼ºå¯†ç ï¼ˆè‡³å°‘6ä½ï¼ŒåŒ…å«å­—æ¯å’Œæ•°å­—ï¼‰
- âœ… ä¸è¦ä¸å…¶ä»–ç½‘ç«™å…±ç”¨å¯†ç 
- âœ… å®šæœŸæ›´æ¢å¯†ç 

### Tokenç®¡ç†

- âœ… Tokenæœ‰æ•ˆæœŸä¸º24å°æ—¶
- âœ… ä¸è¦å°†Tokenåˆ†äº«ç»™ä»–äºº
- âœ… é€€å‡ºç™»å½•æ—¶æ¸…é™¤Token

### æ•°æ®å®‰å…¨

- âœ… ç®€å†å’Œé…ç½®ä»…æ‚¨æœ¬äººå¯è®¿é—®
- âœ… ç³»ç»Ÿä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿéš”ç¦»
- âœ… Cookieæ–‡ä»¶æŒ‰ç”¨æˆ·IDéš”ç¦»

## æŠ€æœ¯æ”¯æŒ

é‡åˆ°é—®é¢˜è¯·è”ç³»ï¼š
- é‚®ç®±ï¼šzhitoujianli@qq.com
- æ–‡æ¡£ï¼šhttps://docs.zhitoujianli.com
- GitHubï¼šhttps://github.com/ericforai/zhitoujianli

